<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="/App (snapshot).tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="/App (snapshot).tsx" />
              <option name="originalContent" value="import React, { useState, useEffect } from 'react';&#10;import SetsBrowser from './components/SetsBrowser';&#10;import CardGallery from './components/CardGallery';&#10;import CardList from './components/CardList';&#10;import QuickAdd from './components/QuickAdd';&#10;import Card from './types/Card';&#10;import { ScryfallSet } from './services/ScryfallAPI';&#10;import './styles/App.css';&#10;&#10;const App: React.FC = () =&gt; {&#10;  const [cards, setCards] = useState&lt;Card[]&gt;([]);&#10;  const [selectedSet, setSelectedSet] = useState&lt;ScryfallSet | null&gt;(null);&#10;  const [activeTab, setActiveTab] = useState&lt;'browse' | 'collection' | 'quick-add'&gt;('browse');&#10;  const [hasLoaded, setHasLoaded] = useState(false);&#10;&#10;  // Helper to sort colors in WUBRG order&#10;  const sortColors = (colors: string[]): string[] =&gt; {&#10;    const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4 };&#10;    return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;  };&#10;&#10;  // Load cards from localStorage on mount&#10;  useEffect(() =&gt; {&#10;    const savedCards = localStorage.getItem('mtgCards');&#10;    if (savedCards) {&#10;      const loadedCards = JSON.parse(savedCards);&#10;      // Migrate: ensure colors are sorted in WUBRG order&#10;      const migratedCards = loadedCards.map((card: Card) =&gt; ({&#10;        ...card,&#10;        colors: sortColors(card.colors || [])&#10;      }));&#10;      setCards(migratedCards);&#10;    }&#10;    setHasLoaded(true);&#10;  }, []);&#10;&#10;  // Save cards to localStorage whenever they change&#10;  useEffect(() =&gt; {&#10;    if (!hasLoaded) {&#10;      return;&#10;    }&#10;    localStorage.setItem('mtgCards', JSON.stringify(cards));&#10;  }, [cards, hasLoaded]);&#10;&#10;  const addCard = (card: Card) =&gt; {&#10;    // Check if card already exists (same scryfallId AND same foil status)&#10;    const existingCard = cards.find(c =&gt;&#10;      c.scryfallId === card.scryfallId &amp;&amp; c.isFoil === card.isFoil&#10;    );&#10;&#10;    if (existingCard) {&#10;      // Increase quantity if it already exists&#10;      setCards(cards.map(c =&gt;&#10;        c.scryfallId === card.scryfallId &amp;&amp; c.isFoil === card.isFoil&#10;          ? { ...c, quantity: c.quantity + 1 }&#10;          : c&#10;      ));&#10;    } else {&#10;      // Add new card&#10;      setCards([...cards, card]);&#10;    }&#10;  };&#10;&#10;  const removeCard = (id: number) =&gt; {&#10;    setCards(cards.filter(card =&gt; card.id !== id));&#10;  };&#10;&#10;  const updateCardQuantity = (id: number, newQuantity: number) =&gt; {&#10;    setCards(cards.map(card =&gt;&#10;      card.id === id ? { ...card, quantity: newQuantity } : card&#10;    ));&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;App&quot;&gt;&#10;      &lt;header className=&quot;app-header&quot;&gt;&#10;        &lt;h1&gt; MTG Collection Tracker&lt;/h1&gt;&#10;        &lt;p className=&quot;subtitle&quot;&gt;Track your Magic: The Gathering collection&lt;/p&gt;&#10;      &lt;/header&gt;&#10;&#10;      &lt;main className=&quot;app-container&quot;&gt;&#10;        &lt;div className=&quot;app-tabs&quot; role=&quot;tablist&quot; aria-label=&quot;Main navigation&quot;&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'browse'}&#10;            className={`app-tab ${activeTab === 'browse' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('browse')}&#10;          &gt;&#10;            Browse Sets&#10;          &lt;/button&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'quick-add'}&#10;            className={`app-tab ${activeTab === 'quick-add' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('quick-add')}&#10;          &gt;&#10;            Quick Add&#10;          &lt;/button&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'collection'}&#10;            className={`app-tab ${activeTab === 'collection' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('collection')}&#10;          &gt;&#10;            My Collection&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        {activeTab === 'browse' &amp;&amp; (&#10;          &lt;div className={`browser-section ${selectedSet ? 'set-selected' : ''}`}&gt;&#10;            {selectedSet &amp;&amp; (&#10;              &lt;div className=&quot;selected-set-header&quot;&gt;&#10;                &lt;button&#10;                  className=&quot;back-to-sets-btn&quot;&#10;                  onClick={() =&gt; setSelectedSet(null)}&#10;                &gt;&#10;                  ← Back to Sets&#10;                &lt;/button&gt;&#10;                &lt;div className=&quot;selected-set-info&quot;&gt;&#10;                  &lt;h3&gt;{selectedSet.name}&lt;/h3&gt;&#10;                  &lt;p&gt;{selectedSet.code.toUpperCase()}&lt;/p&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;            &lt;div className=&quot;sets-section&quot;&gt;&#10;              &lt;SetsBrowser&#10;                onSelectSet={setSelectedSet}&#10;                selectedSetCode={selectedSet?.code}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div className=&quot;gallery-section&quot;&gt;&#10;              &lt;CardGallery&#10;                set={selectedSet}&#10;                onAddCard={addCard}&#10;                collectionCards={cards}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;&#10;        {activeTab === 'quick-add' &amp;&amp; (&#10;          &lt;div className=&quot;collection-section&quot;&gt;&#10;            &lt;QuickAdd&#10;              onAddCard={addCard}&#10;              collectionCards={cards}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;&#10;        {activeTab === 'collection' &amp;&amp; (&#10;          &lt;div className=&quot;collection-section&quot;&gt;&#10;            &lt;CardList&#10;              cards={cards}&#10;              onRemoveCard={removeCard}&#10;              onUpdateQuantity={updateCardQuantity}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;        )}&#10;      &lt;/main&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default App;&#10;" />
              <option name="updatedContent" value="import React, { useState, useEffect, lazy, Suspense } from 'react';&#10;const SetsBrowser = lazy(() =&gt; import('./components/SetsBrowser'));&#10;const CardGallery = lazy(() =&gt; import('./components/CardGallery'));&#10;const CardList = lazy(() =&gt; import('./components/CardList'));&#10;const QuickAdd = lazy(() =&gt; import('./components/QuickAdd'));&#10;import Card from './types/Card';&#10;import { ScryfallSet } from './services/ScryfallAPI';&#10;import './styles/App.css';&#10;&#10;const App: React.FC = () =&gt; {&#10;  const [cards, setCards] = useState&lt;Card[]&gt;([]);&#10;  const [selectedSet, setSelectedSet] = useState&lt;ScryfallSet | null&gt;(null);&#10;  const [activeTab, setActiveTab] = useState&lt;'browse' | 'collection' | 'quick-add'&gt;('browse');&#10;  const [hasLoaded, setHasLoaded] = useState(false);&#10;&#10;  // Helper to sort colors in WUBRG order&#10;  const sortColors = (colors: string[]): string[] =&gt; {&#10;    const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4 };&#10;    return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;  };&#10;&#10;  // Load cards from localStorage on mount&#10;  useEffect(() =&gt; {&#10;    const savedCards = localStorage.getItem('mtgCards');&#10;    if (savedCards) {&#10;      const loadedCards = JSON.parse(savedCards);&#10;      // Migrate: ensure colors are sorted in WUBRG order&#10;      const migratedCards = loadedCards.map((card: Card) =&gt; ({&#10;        ...card,&#10;        colors: sortColors(card.colors || [])&#10;      }));&#10;      setCards(migratedCards);&#10;    }&#10;    setHasLoaded(true);&#10;  }, []);&#10;&#10;  // Save cards to localStorage whenever they change&#10;  useEffect(() =&gt; {&#10;    if (!hasLoaded) {&#10;      return;&#10;    }&#10;    localStorage.setItem('mtgCards', JSON.stringify(cards));&#10;  }, [cards, hasLoaded]);&#10;&#10;  const addCard = (card: Card) =&gt; {&#10;    // Check if card already exists (same scryfallId AND same foil status)&#10;    const existingCard = cards.find(c =&gt;&#10;      c.scryfallId === card.scryfallId &amp;&amp; c.isFoil === card.isFoil&#10;    );&#10;&#10;    if (existingCard) {&#10;      // Increase quantity if it already exists&#10;      setCards(cards.map(c =&gt;&#10;        c.scryfallId === card.scryfallId &amp;&amp; c.isFoil === card.isFoil&#10;          ? { ...c, quantity: c.quantity + 1 }&#10;          : c&#10;      ));&#10;    } else {&#10;      // Add new card&#10;      setCards([...cards, card]);&#10;    }&#10;  };&#10;&#10;  const removeCard = (id: number) =&gt; {&#10;    setCards(cards.filter(card =&gt; card.id !== id));&#10;  };&#10;&#10;  const updateCardQuantity = (id: number, newQuantity: number) =&gt; {&#10;    setCards(cards.map(card =&gt;&#10;      card.id === id ? { ...card, quantity: newQuantity } : card&#10;    ));&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;App&quot;&gt;&#10;      &lt;header className=&quot;app-header&quot;&gt;&#10;        &lt;h1&gt; MTG Collection Tracker&lt;/h1&gt;&#10;        &lt;p className=&quot;subtitle&quot;&gt;Track your Magic: The Gathering collection&lt;/p&gt;&#10;      &lt;/header&gt;&#10;&#10;      &lt;main className=&quot;app-container&quot;&gt;&#10;        &lt;div className=&quot;app-tabs&quot; role=&quot;tablist&quot; aria-label=&quot;Main navigation&quot;&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'browse'}&#10;            className={`app-tab ${activeTab === 'browse' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('browse')}&#10;          &gt;&#10;            Browse Sets&#10;          &lt;/button&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'quick-add'}&#10;            className={`app-tab ${activeTab === 'quick-add' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('quick-add')}&#10;          &gt;&#10;            Quick Add&#10;          &lt;/button&gt;&#10;          &lt;button&#10;            type=&quot;button&quot;&#10;            role=&quot;tab&quot;&#10;            aria-selected={activeTab === 'collection'}&#10;            className={`app-tab ${activeTab === 'collection' ? 'active' : ''}`}&#10;            onClick={() =&gt; setActiveTab('collection')}&#10;          &gt;&#10;            My Collection&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        {activeTab === 'browse' &amp;&amp; (&#10;          &lt;Suspense fallback={&lt;div className=&quot;collection-section&quot;&gt;Loading...&lt;/div&gt;}&gt;&#10;            &lt;div className={`browser-section ${selectedSet ? 'set-selected' : ''}`}&gt;&#10;              {selectedSet &amp;&amp; (&#10;                &lt;div className=&quot;selected-set-header&quot;&gt;&#10;                  &lt;button&#10;                    className=&quot;back-to-sets-btn&quot;&#10;                    onClick={() =&gt; setSelectedSet(null)}&#10;                  &gt;&#10;                    ← Back to Sets&#10;                  &lt;/button&gt;&#10;                  &lt;div className=&quot;selected-set-info&quot;&gt;&#10;                    &lt;h3&gt;{selectedSet.name}&lt;/h3&gt;&#10;                    &lt;p&gt;{selectedSet.code.toUpperCase()}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;              &lt;div className=&quot;sets-section&quot;&gt;&#10;                &lt;SetsBrowser&#10;                  onSelectSet={setSelectedSet}&#10;                  selectedSetCode={selectedSet?.code}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;&#10;              &lt;div className=&quot;gallery-section&quot;&gt;&#10;                &lt;CardGallery&#10;                  set={selectedSet}&#10;                  onAddCard={addCard}&#10;                  collectionCards={cards}&#10;                /&gt;&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          &lt;/Suspense&gt;&#10;        )}&#10;&#10;        {activeTab === 'quick-add' &amp;&amp; (&#10;          &lt;Suspense fallback={&lt;div className=&quot;collection-section&quot;&gt;Loading...&lt;/div&gt;}&gt;&#10;            &lt;div className=&quot;collection-section&quot;&gt;&#10;              &lt;QuickAdd&#10;                onAddCard={addCard}&#10;                collectionCards={cards}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;          &lt;/Suspense&gt;&#10;        )}&#10;&#10;        {activeTab === 'collection' &amp;&amp; (&#10;          &lt;Suspense fallback={&lt;div className=&quot;collection-section&quot;&gt;Loading...&lt;/div&gt;}&gt;&#10;            &lt;div className=&quot;collection-section&quot;&gt;&#10;              &lt;CardList&#10;                cards={cards}&#10;                onRemoveCard={removeCard}&#10;                onUpdateQuantity={updateCardQuantity}&#10;              /&gt;&#10;            &lt;/div&gt;&#10;          &lt;/Suspense&gt;&#10;        )}&#10;      &lt;/main&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default App;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="/CardGallery (snapshot).css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="/CardGallery (snapshot).css" />
              <option name="originalContent" value=".card-gallery {&#10;  display: flex;&#10;  flex-direction: column;&#10;  height: 100%;&#10;}&#10;&#10;.quick-search {&#10;  margin-bottom: 16px;&#10;  padding: 12px;&#10;  border: 1px solid rgba(255, 255, 255, 0.08);&#10;  border-radius: 10px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;}&#10;&#10;.quick-search-header {&#10;  display: flex;&#10;  align-items: baseline;&#10;  justify-content: space-between;&#10;  gap: 10px;&#10;  margin-bottom: 8px;&#10;}&#10;&#10;.quick-search-header h3 {&#10;  color: #e0e6ed;&#10;  font-size: 1rem;&#10;  margin: 0;&#10;}&#10;&#10;.quick-search-header span {&#10;  color: #8a9bb2;&#10;  font-size: 0.8rem;&#10;}&#10;&#10;.quick-search-input input {&#10;  width: 100%;&#10;  padding: 10px 12px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.04);&#10;  color: #e0e6ed;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.quick-search-input input:focus {&#10;  outline: none;&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.search-results {&#10;  margin-top: 10px;&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));&#10;  gap: 8px;&#10;}&#10;&#10;.search-result-card {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  padding: 8px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.08);&#10;  background: rgba(255, 255, 255, 0.02);&#10;  color: inherit;&#10;  cursor: pointer;&#10;  text-align: left;&#10;  transition: all 0.2s ease;&#10;  position: relative;&#10;}&#10;&#10;.search-result-card:hover {&#10;  background: rgba(255, 255, 255, 0.08);&#10;  border-color: rgba(102, 126, 234, 0.4);&#10;}&#10;&#10;.search-result-card img {&#10;  width: 40px;&#10;  height: 56px;&#10;  object-fit: cover;&#10;  border-radius: 4px;&#10;}&#10;&#10;.search-result-info {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 2px;&#10;}&#10;&#10;.search-result-name {&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;}&#10;&#10;.search-result-set {&#10;  color: #8a9bb2;&#10;  font-size: 0.75rem;&#10;}&#10;&#10;.search-error {&#10;  margin-top: 8px;&#10;  color: #ff6464;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.search-loading {&#10;  margin-top: 8px;&#10;  color: #a0aec0;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.gallery-header {&#10;  margin-bottom: 16px;&#10;}&#10;&#10;.gallery-header-top {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  gap: 16px;&#10;}&#10;&#10;.gallery-header h3 {&#10;  color: #e0e6ed;&#10;  font-size: 1.2rem;&#10;  margin: 0 0 4px 0;&#10;}&#10;&#10;.gallery-header p {&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  margin: 0;&#10;}&#10;&#10;.foil-toggle-btn {&#10;  padding: 8px 16px;&#10;  border-radius: 8px;&#10;  border: 2px solid rgba(255, 215, 0, 0.3);&#10;  background: rgba(255, 255, 255, 0.05);&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  white-space: nowrap;&#10;}&#10;&#10;.foil-toggle-btn:hover {&#10;  background: rgba(255, 255, 255, 0.1);&#10;  border-color: rgba(255, 215, 0, 0.5);&#10;}&#10;&#10;.foil-toggle-btn.active {&#10;  background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.2) 100%);&#10;  border-color: rgba(255, 215, 0, 0.8);&#10;  color: #ffd700;&#10;  box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);&#10;}&#10;&#10;.gallery-empty {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  min-height: 300px;&#10;  color: #a0aec0;&#10;  font-size: 1.1rem;&#10;}&#10;&#10;.gallery-error {&#10;  padding: 16px;&#10;  background: rgba(255, 100, 100, 0.1);&#10;  border: 1px solid rgba(255, 100, 100, 0.3);&#10;  border-radius: 8px;&#10;  color: #ff6464;&#10;  margin-bottom: 16px;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.gallery-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));&#10;  gap: 12px;&#10;  flex: 1;&#10;  overflow-y: auto;&#10;  padding-right: 4px;&#10;}&#10;&#10;.gallery-card-wrapper {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 6px;&#10;}&#10;&#10;.gallery-card {&#10;  position: relative;&#10;  aspect-ratio: 63/88;&#10;  border-radius: 6px;&#10;  overflow: hidden;&#10;  cursor: pointer;&#10;  border: 2px solid rgba(255, 255, 255, 0.1);&#10;  transition: all 0.2s ease;&#10;  background: rgba(255, 255, 255, 0.02);&#10;}&#10;&#10;.card-flip-btn {&#10;  position: absolute;&#10;  bottom: 6px;&#10;  left: 6px;&#10;  padding: 4px 6px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.35);&#10;  background: rgba(15, 20, 25, 0.7);&#10;  color: #e0e6ed;&#10;  font-size: 0.7rem;&#10;  cursor: pointer;&#10;  z-index: 2;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.card-flip-btn:hover {&#10;  background: rgba(102, 126, 234, 0.35);&#10;  border-color: rgba(102, 126, 234, 0.7);&#10;}&#10;&#10;.gallery-card:hover {&#10;  border-color: rgba(102, 126, 234, 0.5);&#10;  transform: scale(1.05);&#10;  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.gallery-card.in-collection {&#10;  border-color: rgba(100, 200, 100, 0.6);&#10;}&#10;&#10;.in-collection-badge {&#10;  position: absolute;&#10;  top: 6px;&#10;  right: 6px;&#10;  width: 24px;&#10;  height: 24px;&#10;  background: rgba(100, 200, 100, 0.9);&#10;  border-radius: 50%;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  color: white;&#10;  font-size: 0.9rem;&#10;  font-weight: bold;&#10;  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.card-name {&#10;  color: #e0e6ed;&#10;  font-size: 0.75rem;&#10;  white-space: nowrap;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  line-height: 1.2;&#10;}&#10;&#10;.gallery-loading {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  padding: 20px;&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.load-more-btn {&#10;  margin-top: 16px;&#10;  padding: 12px 24px;&#10;  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;  color: white;&#10;  border: none;&#10;  border-radius: 8px;&#10;  font-size: 0.95rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.3s ease;&#10;  align-self: center;&#10;}&#10;&#10;.load-more-btn:hover {&#10;  transform: translateY(-2px);&#10;  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);&#10;}&#10;&#10;.gallery-end {&#10;  text-align: center;&#10;  padding: 16px;&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  margin-top: 12px;&#10;}&#10;&#10;/* Scrollbar styling */&#10;.gallery-grid::-webkit-scrollbar {&#10;  width: 6px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-track {&#10;  background: rgba(255, 255, 255, 0.02);&#10;  border-radius: 10px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb {&#10;  background: rgba(102, 126, 234, 0.4);&#10;  border-radius: 10px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb:hover {&#10;  background: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));&#10;  }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));&#10;    gap: 8px;&#10;  }&#10;&#10;  .gallery-card-wrapper {&#10;    gap: 4px;&#10;  }&#10;&#10;  .card-name {&#10;    font-size: 0.7rem;&#10;  }&#10;}&#10;&#10;.search-result-badge {&#10;  position: absolute;&#10;  top: 6px;&#10;  left: 34px;&#10;  min-width: 24px;&#10;  height: 24px;&#10;  padding: 0 6px;&#10;  border-radius: 999px;&#10;  background: rgba(100, 200, 100, 0.9);&#10;  color: #fff;&#10;  font-size: 0.75rem;&#10;  font-weight: 700;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);&#10;  z-index: 2;&#10;}&#10;&#10;.search-result-card .card-flip-btn {&#10;  bottom: 6px;&#10;  left: 6px;&#10;  position: absolute;&#10;}&#10;&#10;.gallery-card img {&#10;  width: 100%;&#10;  height: 100%;&#10;  object-fit: cover;&#10;  object-position: center;&#10;}&#10;&#10;.gallery-card.foil-mode {&#10;  position: relative;&#10;  overflow: hidden;&#10;}&#10;&#10;.gallery-card.foil-mode::before {&#10;  content: '';&#10;  position: absolute;&#10;  top: -50%;&#10;  left: -50%;&#10;  width: 200%;&#10;  height: 200%;&#10;  background: linear-gradient(&#10;    45deg,&#10;    transparent 25%,&#10;    rgba(255, 0, 0, 0.2) 30%,&#10;    rgba(255, 165, 0, 0.25) 35%,&#10;    rgba(255, 255, 0, 0.3) 40%,&#10;    rgba(0, 255, 0, 0.25) 45%,&#10;    rgba(0, 255, 255, 0.3) 50%,&#10;    rgba(0, 100, 255, 0.25) 55%,&#10;    rgba(138, 43, 226, 0.3) 60%,&#10;    rgba(255, 255, 255, 0.15) 65%,&#10;    transparent 75%&#10;  );&#10;  animation: foilShimmer 3s infinite linear;&#10;  pointer-events: none;&#10;  z-index: 1;&#10;}&#10;&#10;.gallery-card.foil-mode:hover::before {&#10;  animation-duration: 2s;&#10;}&#10;&#10;@keyframes foilShimmer {&#10;  0% {&#10;    transform: translateX(-100%) translateY(-100%) rotate(45deg);&#10;  }&#10;  100% {&#10;    transform: translateX(100%) translateY(100%) rotate(45deg);&#10;  }&#10;}&#10;&#10;.foil-effect {&#10;  filter: brightness(1.1) contrast(1.05);&#10;}&#10;&#10;.gallery-card.foil-mode .in-collection-badge,&#10;.gallery-card.foil-mode .card-flip-btn {&#10;  z-index: 2;&#10;}&#10;" />
              <option name="updatedContent" value=".card-gallery {&#10;  display: flex;&#10;  flex-direction: column;&#10;  height: 100%;&#10;}&#10;&#10;.quick-search {&#10;  margin-bottom: 16px;&#10;  padding: 12px;&#10;  border: 1px solid rgba(255, 255, 255, 0.08);&#10;  border-radius: 10px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;}&#10;&#10;.quick-search-header {&#10;  display: flex;&#10;  align-items: baseline;&#10;  justify-content: space-between;&#10;  gap: 10px;&#10;  margin-bottom: 8px;&#10;}&#10;&#10;.quick-search-header h3 {&#10;  color: #e0e6ed;&#10;  font-size: 1rem;&#10;  margin: 0;&#10;}&#10;&#10;.quick-search-header span {&#10;  color: #8a9bb2;&#10;  font-size: 0.8rem;&#10;}&#10;&#10;.quick-search-input input {&#10;  width: 100%;&#10;  padding: 10px 12px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.04);&#10;  color: #e0e6ed;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.quick-search-input input:focus {&#10;  outline: none;&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.search-results {&#10;  margin-top: 10px;&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));&#10;  gap: 8px;&#10;}&#10;&#10;.search-result-card {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  padding: 8px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.08);&#10;  background: rgba(255, 255, 255, 0.02);&#10;  color: inherit;&#10;  cursor: pointer;&#10;  text-align: left;&#10;  transition: all 0.2s ease;&#10;  position: relative;&#10;}&#10;&#10;.search-result-card:hover {&#10;  background: rgba(255, 255, 255, 0.08);&#10;  border-color: rgba(102, 126, 234, 0.4);&#10;}&#10;&#10;.search-result-card img {&#10;  width: 40px;&#10;  height: 56px;&#10;  object-fit: cover;&#10;  border-radius: 4px;&#10;}&#10;&#10;.search-result-info {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 2px;&#10;}&#10;&#10;.search-result-name {&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;}&#10;&#10;.search-result-set {&#10;  color: #8a9bb2;&#10;  font-size: 0.75rem;&#10;}&#10;&#10;.search-error {&#10;  margin-top: 8px;&#10;  color: #ff6464;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.search-loading {&#10;  margin-top: 8px;&#10;  color: #a0aec0;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.gallery-header {&#10;  margin-bottom: 16px;&#10;}&#10;&#10;.gallery-header-top {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  gap: 16px;&#10;}&#10;&#10;.gallery-header h3 {&#10;  color: #e0e6ed;&#10;  font-size: 1.2rem;&#10;  margin: 0 0 4px 0;&#10;}&#10;&#10;.gallery-header p {&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  margin: 0;&#10;}&#10;&#10;.foil-toggle-btn {&#10;  padding: 8px 16px;&#10;  border-radius: 8px;&#10;  border: 2px solid rgba(255, 215, 0, 0.3);&#10;  background: rgba(255, 255, 255, 0.05);&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  white-space: nowrap;&#10;}&#10;&#10;.foil-toggle-btn:hover {&#10;  background: rgba(255, 255, 255, 0.1);&#10;  border-color: rgba(255, 215, 0, 0.5);&#10;}&#10;&#10;.foil-toggle-btn.active {&#10;  background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.2) 100%);&#10;  border-color: rgba(255, 215, 0, 0.8);&#10;  color: #ffd700;&#10;  box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);&#10;}&#10;&#10;.gallery-empty {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  min-height: 300px;&#10;  color: #a0aec0;&#10;  font-size: 1.1rem;&#10;}&#10;&#10;.gallery-error {&#10;  padding: 16px;&#10;  background: rgba(255, 100, 100, 0.1);&#10;  border: 1px solid rgba(255, 100, 100, 0.3);&#10;  border-radius: 8px;&#10;  color: #ff6464;&#10;  margin-bottom: 16px;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.gallery-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));&#10;  gap: 12px;&#10;  flex: 1;&#10;  overflow-y: auto;&#10;  padding-right: 4px;&#10;}&#10;&#10;.gallery-card-wrapper {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 6px;&#10;}&#10;&#10;.gallery-card {&#10;  position: relative;&#10;  aspect-ratio: 63/88;&#10;  border-radius: 6px;&#10;  overflow: hidden;&#10;  cursor: pointer;&#10;  border: 2px solid rgba(255, 255, 255, 0.1);&#10;  transition: all 0.2s ease;&#10;  background: rgba(255, 255, 255, 0.02);&#10;}&#10;&#10;.card-flip-btn {&#10;  position: absolute;&#10;  bottom: 6px;&#10;  left: 6px;&#10;  padding: 4px 6px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.35);&#10;  background: rgba(15, 20, 25, 0.7);&#10;  color: #e0e6ed;&#10;  font-size: 0.7rem;&#10;  cursor: pointer;&#10;  z-index: 2;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.card-flip-btn:hover {&#10;  background: rgba(102, 126, 234, 0.35);&#10;  border-color: rgba(102, 126, 234, 0.7);&#10;}&#10;&#10;.gallery-card:hover {&#10;  border-color: rgba(102, 126, 234, 0.5);&#10;  transform: scale(1.05);&#10;  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.gallery-card.in-collection {&#10;  border-color: rgba(100, 200, 100, 0.6);&#10;}&#10;&#10;.in-collection-badge {&#10;  position: absolute;&#10;  top: 6px;&#10;  right: 6px;&#10;  width: 24px;&#10;  height: 24px;&#10;  background: rgba(100, 200, 100, 0.9);&#10;  border-radius: 50%;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  color: white;&#10;  font-size: 0.9rem;&#10;  font-weight: bold;&#10;  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.card-name {&#10;  color: #e0e6ed;&#10;  font-size: 0.75rem;&#10;  white-space: nowrap;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  line-height: 1.2;&#10;}&#10;&#10;.gallery-loading {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  padding: 20px;&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.load-more-btn {&#10;  margin-top: 16px;&#10;  padding: 12px 24px;&#10;  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;  color: white;&#10;  border: none;&#10;  border-radius: 8px;&#10;  font-size: 0.95rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.3s ease;&#10;  align-self: center;&#10;}&#10;&#10;.load-more-btn:hover {&#10;  transform: translateY(-2px);&#10;  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);&#10;}&#10;&#10;.gallery-end {&#10;  text-align: center;&#10;  padding: 16px;&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  margin-top: 12px;&#10;}&#10;&#10;/* Scrollbar styling */&#10;.gallery-grid::-webkit-scrollbar {&#10;  width: 6px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-track {&#10;  background: rgba(255, 255, 255, 0.02);&#10;  border-radius: 10px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb {&#10;  background: rgba(102, 126, 234, 0.4);&#10;  border-radius: 10px;&#10;}&#10;&#10;.gallery-grid::-webkit-scrollbar-thumb:hover {&#10;  background: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));&#10;  }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;  .gallery-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));&#10;    gap: 8px;&#10;  }&#10;&#10;  .gallery-card-wrapper {&#10;    gap: 4px;&#10;  }&#10;&#10;  .card-name {&#10;    font-size: 0.7rem;&#10;  }&#10;}&#10;&#10;.search-result-badge {&#10;  position: absolute;&#10;  top: 6px;&#10;  left: 34px;&#10;  min-width: 24px;&#10;  height: 24px;&#10;  padding: 0 6px;&#10;  border-radius: 999px;&#10;  background: rgba(100, 200, 100, 0.9);&#10;  color: #fff;&#10;  font-size: 0.75rem;&#10;  font-weight: 700;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);&#10;  z-index: 2;&#10;}&#10;&#10;.search-result-card .card-flip-btn {&#10;  bottom: 6px;&#10;  left: 6px;&#10;  position: absolute;&#10;}&#10;&#10;.gallery-card img {&#10;  width: 100%;&#10;  height: 100%;&#10;  object-fit: cover;&#10;  object-position: center;&#10;}&#10;&#10;.gallery-card.foil-mode {&#10;  position: relative;&#10;  overflow: hidden;&#10;}&#10;&#10;.gallery-card.foil-mode::before {&#10;  content: '';&#10;  position: absolute;&#10;  top: -50%;&#10;  left: -50%;&#10;  width: 200%;&#10;  height: 200%;&#10;  background: linear-gradient(&#10;    45deg,&#10;    transparent 25%,&#10;    rgba(255, 0, 0, 0.2) 30%,&#10;    rgba(255, 165, 0, 0.25) 35%,&#10;    rgba(255, 255, 0, 0.3) 40%,&#10;    rgba(0, 255, 0, 0.25) 45%,&#10;    rgba(0, 255, 255, 0.3) 50%,&#10;    rgba(0, 100, 255, 0.25) 55%,&#10;    rgba(138, 43, 226, 0.3) 60%,&#10;    rgba(255, 255, 255, 0.15) 65%,&#10;    transparent 75%&#10;  );&#10;  animation: foilShimmer 3s infinite linear;&#10;  pointer-events: none;&#10;  z-index: 1;&#10;}&#10;&#10;.gallery-card.foil-mode:hover::before {&#10;  animation-duration: 2s;&#10;}&#10;&#10;@keyframes foilShimmer {&#10;  0% {&#10;    transform: translateX(-100%) translateY(-100%) rotate(45deg);&#10;  }&#10;  100% {&#10;    transform: translateX(100%) translateY(100%) rotate(45deg);&#10;  }&#10;}&#10;&#10;.foil-effect {&#10;  /* No filter - shimmer animation provides the foil effect */&#10;}&#10;&#10;.gallery-card.foil-mode .in-collection-badge,&#10;.gallery-card.foil-mode .card-flip-btn {&#10;  z-index: 2;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="/CardGallery (snapshot).tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="/CardGallery (snapshot).tsx" />
              <option name="originalContent" value="import React, { useState, useEffect } from 'react';&#10;import { ScryfallCard, ScryfallSet, scryfallAPI } from '../services/ScryfallAPI';&#10;import Card from '../types/Card';&#10;import '../styles/CardGallery.css';&#10;&#10;const sortColors = (colors: string[]): string[] =&gt; {&#10;  const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4 };&#10;  return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;};&#10;&#10;interface CardGalleryProps {&#10;  set: ScryfallSet | null;&#10;  onAddCard: (card: Card) =&gt; void;&#10;  collectionCards: Card[];&#10;}&#10;&#10;const CardGallery: React.FC&lt;CardGalleryProps&gt; = ({ set, onAddCard, collectionCards }) =&gt; {&#10;  const [cards, setCards] = useState&lt;ScryfallCard[]&gt;([]);&#10;  const [loading, setLoading] = useState(false);&#10;  const [error, setError] = useState&lt;string | null&gt;(null);&#10;  const [loadingCount, setLoadingCount] = useState(0);&#10;  const [searchQuery, setSearchQuery] = useState('');&#10;  const [searchResults, setSearchResults] = useState&lt;ScryfallCard[]&gt;([]);&#10;  const [searchLoading, setSearchLoading] = useState(false);&#10;  const [searchError, setSearchError] = useState&lt;string | null&gt;(null);&#10;  const [faceOverrides, setFaceOverrides] = useState&lt;Record&lt;string, number&gt;&gt;({});&#10;  const [searchFaceOverrides, setSearchFaceOverrides] = useState&lt;Record&lt;string, number&gt;&gt;({});&#10;&#10;  useEffect(() =&gt; {&#10;    setCards([]);&#10;    setError(null);&#10;    setLoadingCount(0);&#10;    setFaceOverrides({});&#10;  }, [set]);&#10;&#10;  useEffect(() =&gt; {&#10;    if (!set) {&#10;      return;&#10;    }&#10;&#10;    const sortByCollectorNumber = (items: ScryfallCard[]) =&gt; {&#10;      return [...items].sort((a, b) =&gt; {&#10;        const aNum = parseInt(a.collector_number, 10);&#10;        const bNum = parseInt(b.collector_number, 10);&#10;&#10;        if (!Number.isNaN(aNum) &amp;&amp; !Number.isNaN(bNum)) {&#10;          return aNum - bNum;&#10;        }&#10;        if (!Number.isNaN(aNum)) {&#10;          return -1;&#10;        }&#10;        if (!Number.isNaN(bNum)) {&#10;          return 1;&#10;        }&#10;        return a.collector_number.localeCompare(b.collector_number, undefined, { numeric: true });&#10;      });&#10;    };&#10;&#10;    const fetchAllPages = async () =&gt; {&#10;      try {&#10;        setLoading(true);&#10;        setCards([]);&#10;        setLoadingCount(0);&#10;&#10;        let page = 1;&#10;        let hasMore = true;&#10;        let allCards: ScryfallCard[] = [];&#10;&#10;        while (hasMore) {&#10;          const response = await scryfallAPI.getCardsForSet(set.code.toLowerCase(), page);&#10;          const sortedPage = sortByCollectorNumber(response.data);&#10;          allCards = [...allCards, ...sortedPage];&#10;          setCards(allCards);&#10;          setLoadingCount(allCards.length);&#10;&#10;          hasMore = response.has_more;&#10;          page += 1;&#10;        }&#10;      } catch (err) {&#10;        setError(err instanceof Error ? err.message : 'Failed to load cards');&#10;      } finally {&#10;        setLoading(false);&#10;      }&#10;    };&#10;&#10;    fetchAllPages();&#10;  }, [set]);&#10;&#10;  useEffect(() =&gt; {&#10;    if (!searchQuery.trim()) {&#10;      setSearchResults([]);&#10;      setSearchError(null);&#10;      return;&#10;    }&#10;&#10;    const handle = window.setTimeout(async () =&gt; {&#10;      try {&#10;        setSearchLoading(true);&#10;        setSearchError(null);&#10;        const query = `${searchQuery} game:paper`;&#10;        const response = await scryfallAPI.searchCards(query, 1, 20);&#10;        setSearchResults(response.data);&#10;      } catch (err) {&#10;        setSearchError(err instanceof Error ? err.message : 'Failed to search cards');&#10;      } finally {&#10;        setSearchLoading(false);&#10;      }&#10;    }, 300);&#10;&#10;    return () =&gt; window.clearTimeout(handle);&#10;  }, [searchQuery]);&#10;&#10;  const getCardQuantity = (scryfallId: string): number =&gt; {&#10;    const card = collectionCards.find(c =&gt; c.scryfallId === scryfallId);&#10;    return card ? card.quantity : 0;&#10;  };&#10;&#10;&#10;  const getCardColors = (card: ScryfallCard): string[] =&gt; {&#10;    if (card.color_identity &amp;&amp; card.color_identity.length &gt; 0) {&#10;      return card.color_identity;&#10;    }&#10;    const faceIdentity = card.card_faces?.flatMap(face =&gt; face.color_identity ?? []) ?? [];&#10;    if (faceIdentity.length &gt; 0) {&#10;      return Array.from(new Set(faceIdentity));&#10;    }&#10;    if (card.colors &amp;&amp; card.colors.length &gt; 0) {&#10;      return card.colors;&#10;    }&#10;    const faceColors = card.card_faces?.flatMap(face =&gt; face.colors ?? []) ?? [];&#10;    return Array.from(new Set(faceColors));&#10;  };&#10;&#10;  const getCardFaces = (card: ScryfallCard) =&gt; {&#10;    return (card.card_faces || [])&#10;      .map(face =&gt; ({&#10;        name: face.name,&#10;        imageUrl: face.image_uris?.normal,&#10;        smallImageUrl: face.image_uris?.small,&#10;      }))&#10;      .filter(face =&gt; !!face.imageUrl) as Array&lt;{ name: string; imageUrl: string; smallImageUrl?: string }&gt;;&#10;  };&#10;&#10;  const toggleFace = (cardId: string) =&gt; {&#10;    setFaceOverrides(prev =&gt; {&#10;      const current = prev[cardId] ?? 0;&#10;      return { ...prev, [cardId]: current === 0 ? 1 : 0 };&#10;    });&#10;  };&#10;&#10;  const toggleSearchFace = (cardId: string) =&gt; {&#10;    setSearchFaceOverrides(prev =&gt; {&#10;      const current = prev[cardId] ?? 0;&#10;      return { ...prev, [cardId]: current === 0 ? 1 : 0 };&#10;    });&#10;  };&#10;&#10;  if (!set) {&#10;    return (&#10;      &lt;div className=&quot;card-gallery&quot;&gt;&#10;        &lt;div className=&quot;quick-search&quot;&gt;&#10;          &lt;h3&gt;Quick add&lt;/h3&gt;&#10;          &lt;p&gt;Search for a single card and add it to your collection.&lt;/p&gt;&#10;          &lt;div className=&quot;quick-search-input&quot;&gt;&#10;            &lt;input&#10;              type=&quot;text&quot;&#10;              placeholder=&quot;Search card name...&quot;&#10;              value={searchQuery}&#10;              onChange={(event) =&gt; setSearchQuery(event.target.value)}&#10;              aria-label=&quot;Search cards&quot;&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          {searchError &amp;&amp; &lt;div className=&quot;search-error&quot;&gt;{searchError}&lt;/div&gt;}&#10;          {searchLoading &amp;&amp; &lt;div className=&quot;search-loading&quot;&gt;Searching...&lt;/div&gt;}&#10;          {searchResults.length &gt; 0 &amp;&amp; (&#10;            &lt;div className=&quot;search-results&quot;&gt;&#10;              {searchResults.map(result =&gt; {&#10;                const faces = getCardFaces(result);&#10;                const faceIndex = searchFaceOverrides[result.id] ?? 0;&#10;                const faceImage = faces[faceIndex]?.smallImageUrl || scryfallAPI.getCardSmallImageUrl(result);&#10;                return (&#10;                  &lt;button&#10;                    key={result.id}&#10;                    className=&quot;search-result-card&quot;&#10;                    onClick={() =&gt; {&#10;                      const cardFaces = getCardFaces(result);&#10;                      const card: Card = {&#10;                        id: Date.now() + Math.random(),&#10;                        scryfallId: result.id,&#10;                        name: result.name,&#10;                        set: result.set,&#10;                        setName: result.set_name || result.set.toUpperCase(),&#10;                        type: result.type_line,&#10;                        colors: sortColors(getCardColors(result)),&#10;                        quantity: 1,&#10;                        imageUrl: scryfallAPI.getCardImageUrl(result),&#10;                        cardFaces,&#10;                        collectorNumber: result.collector_number,&#10;                        oracleText: result.oracle_text,&#10;                      };&#10;                      onAddCard(card);&#10;                    }}&#10;                  &gt;&#10;                    &lt;img src={faceImage} alt={result.name} /&gt;&#10;                    {faces.length &gt; 1 &amp;&amp; (&#10;                      &lt;button&#10;                        type=&quot;button&quot;&#10;                        className=&quot;card-flip-btn&quot;&#10;                        onClick={(event) =&gt; {&#10;                          event.stopPropagation();&#10;                          toggleSearchFace(result.id);&#10;                        }}&#10;                      &gt;&#10;                        Flip&#10;                      &lt;/button&gt;&#10;                    )}&#10;                    {getCardQuantity(result.id) &gt; 0 &amp;&amp; (&#10;                      &lt;div className=&quot;search-result-badge&quot;&gt;&#10;                        {getCardQuantity(result.id) &gt;= 4&#10;                          ? '✓'&#10;                          : `${getCardQuantity(result.id)}/4`}&#10;                      &lt;/div&gt;&#10;                    )}&#10;                    &lt;div className=&quot;search-result-info&quot;&gt;&#10;                      &lt;div className=&quot;search-result-name&quot;&gt;{result.name}&lt;/div&gt;&#10;                      &lt;div className=&quot;search-result-set&quot;&gt;&#10;                        {result.set_name || result.set.toUpperCase()}&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/button&gt;&#10;                );&#10;              })}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    );&#10;  }&#10;&#10;  const handleAddCard = (scryfallCard: ScryfallCard) =&gt; {&#10;    const cardFaces = getCardFaces(scryfallCard);&#10;    const card: Card = {&#10;      id: Date.now() + Math.random(),&#10;      scryfallId: scryfallCard.id,&#10;      name: scryfallCard.name,&#10;      set: set.code,&#10;      setName: set.name,&#10;      setReleasedAt: set.released_at,&#10;      type: scryfallCard.type_line,&#10;      colors: sortColors(getCardColors(scryfallCard)),&#10;      quantity: 1,&#10;      imageUrl: scryfallAPI.getCardImageUrl(scryfallCard),&#10;      cardFaces,&#10;      collectorNumber: scryfallCard.collector_number,&#10;      oracleText: scryfallCard.oracle_text,&#10;    };&#10;    onAddCard(card);&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;card-gallery&quot;&gt;&#10;      &lt;div className=&quot;quick-search&quot;&gt;&#10;        &lt;div className=&quot;quick-search-header&quot;&gt;&#10;          &lt;h3&gt;Quick add&lt;/h3&gt;&#10;          &lt;span&gt;Search by name and add directly&lt;/span&gt;&#10;        &lt;/div&gt;&#10;        &lt;div className=&quot;quick-search-input&quot;&gt;&#10;          &lt;input&#10;            type=&quot;text&quot;&#10;            placeholder=&quot;Search card name...&quot;&#10;            value={searchQuery}&#10;            onChange={(event) =&gt; setSearchQuery(event.target.value)}&#10;            aria-label=&quot;Search cards&quot;&#10;          /&gt;&#10;        &lt;/div&gt;&#10;        {searchError &amp;&amp; &lt;div className=&quot;search-error&quot;&gt;{searchError}&lt;/div&gt;}&#10;        {searchLoading &amp;&amp; &lt;div className=&quot;search-loading&quot;&gt;Searching...&lt;/div&gt;}&#10;        {searchResults.length &gt; 0 &amp;&amp; (&#10;          &lt;div className=&quot;search-results&quot;&gt;&#10;            {searchResults.map(result =&gt; {&#10;              const faces = getCardFaces(result);&#10;              const faceIndex = searchFaceOverrides[result.id] ?? 0;&#10;              const faceImage = faces[faceIndex]?.smallImageUrl || scryfallAPI.getCardSmallImageUrl(result);&#10;              return (&#10;                &lt;button&#10;                  key={result.id}&#10;                  className=&quot;search-result-card&quot;&#10;                  onClick={() =&gt; {&#10;                    const cardFaces = getCardFaces(result);&#10;                    const card: Card = {&#10;                      id: Date.now() + Math.random(),&#10;                      scryfallId: result.id,&#10;                      name: result.name,&#10;                      set: result.set,&#10;                      setName: result.set_name || result.set.toUpperCase(),&#10;                      type: result.type_line,&#10;                      colors: sortColors(getCardColors(result)),&#10;                      quantity: 1,&#10;                      imageUrl: scryfallAPI.getCardImageUrl(result),&#10;                      cardFaces,&#10;                      collectorNumber: result.collector_number,&#10;                      oracleText: result.oracle_text,&#10;                    };&#10;                    onAddCard(card);&#10;                  }}&#10;                &gt;&#10;                  &lt;img src={faceImage} alt={result.name} /&gt;&#10;                  {faces.length &gt; 1 &amp;&amp; (&#10;                    &lt;button&#10;                      type=&quot;button&quot;&#10;                      className=&quot;card-flip-btn&quot;&#10;                      onClick={(event) =&gt; {&#10;                        event.stopPropagation();&#10;                        toggleSearchFace(result.id);&#10;                      }}&#10;                    &gt;&#10;                      Flip&#10;                    &lt;/button&gt;&#10;                  )}&#10;                  {getCardQuantity(result.id) &gt; 0 &amp;&amp; (&#10;                    &lt;div className=&quot;search-result-badge&quot;&gt;&#10;                      {getCardQuantity(result.id) &gt;= 4&#10;                        ? '✓'&#10;                        : `${getCardQuantity(result.id)}/4`}&#10;                    &lt;/div&gt;&#10;                  )}&#10;                  &lt;div className=&quot;search-result-info&quot;&gt;&#10;                    &lt;div className=&quot;search-result-name&quot;&gt;{result.name}&lt;/div&gt;&#10;                    &lt;div className=&quot;search-result-set&quot;&gt;&#10;                      {result.set_name || result.set.toUpperCase()}&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/button&gt;&#10;              );&#10;            })}&#10;          &lt;/div&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;&#10;      &lt;div className=&quot;gallery-header&quot;&gt;&#10;        &lt;h3&gt;{set.name}&lt;/h3&gt;&#10;        &lt;p&gt;{loading ? `Loading ${loadingCount} cards...` : `${cards.length} cards loaded`}&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {error &amp;&amp; &lt;div className=&quot;gallery-error&quot;&gt;Error: {error}&lt;/div&gt;}&#10;&#10;      &lt;div className=&quot;gallery-grid&quot;&gt;&#10;        {cards.map(card =&gt; {&#10;          const faces = getCardFaces(card);&#10;          const faceIndex = faceOverrides[card.id] ?? 0;&#10;          const faceImage = faces[faceIndex]?.smallImageUrl || scryfallAPI.getCardSmallImageUrl(card);&#10;          const quantity = getCardQuantity(card.id);&#10;          return (&#10;            &lt;div key={`${card.id}-${card.collector_number}`} className=&quot;gallery-card-wrapper&quot;&gt;&#10;              &lt;div&#10;                className={`gallery-card ${quantity &gt; 0 ? 'in-collection' : ''}`}&#10;                onClick={() =&gt; handleAddCard(card)}&#10;                title={`${card.name} - ${card.type_line}`}&#10;              &gt;&#10;                &lt;img&#10;                  src={faceImage}&#10;                  alt={card.name}&#10;                  loading=&quot;lazy&quot;&#10;                /&gt;&#10;                {faces.length &gt; 1 &amp;&amp; (&#10;                  &lt;button&#10;                    type=&quot;button&quot;&#10;                    className=&quot;card-flip-btn&quot;&#10;                    onClick={(event) =&gt; {&#10;                      event.stopPropagation();&#10;                      toggleFace(card.id);&#10;                    }}&#10;                  &gt;&#10;                    Flip&#10;                  &lt;/button&gt;&#10;                )}&#10;                {quantity &gt; 0 &amp;&amp; (&#10;                  &lt;div className=&quot;in-collection-badge&quot;&gt;&#10;                    {quantity &gt;= 4 ? '✓' : `${quantity}/4`}&#10;                  &lt;/div&gt;&#10;                )}&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;card-name&quot;&gt;{card.name}&lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; &lt;div className=&quot;gallery-loading&quot;&gt;Loading cards...&lt;/div&gt;}&#10;&#10;      {!loading &amp;&amp; cards.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;gallery-end&quot;&gt;All cards loaded!&lt;/div&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default CardGallery;&#10;" />
              <option name="updatedContent" value="import React, { useState, useEffect } from 'react';&#10;import { ScryfallCard, ScryfallSet, scryfallAPI } from '../services/ScryfallAPI';&#10;import Card from '../types/Card';&#10;import '../styles/CardGallery.css';&#10;&#10;const sortColors = (colors: string[]): string[] =&gt; {&#10;  const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4 };&#10;  return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;};&#10;&#10;interface CardGalleryProps {&#10;  set: ScryfallSet | null;&#10;  onAddCard: (card: Card) =&gt; void;&#10;  collectionCards: Card[];&#10;}&#10;&#10;const CardGallery: React.FC&lt;CardGalleryProps&gt; = ({ set, onAddCard, collectionCards }) =&gt; {&#10;  const [cards, setCards] = useState&lt;ScryfallCard[]&gt;([]);&#10;  const [loading, setLoading] = useState(false);&#10;  const [error, setError] = useState&lt;string | null&gt;(null);&#10;  const [loadingCount, setLoadingCount] = useState(0);&#10;  const [faceOverrides, setFaceOverrides] = useState&lt;Record&lt;string, number&gt;&gt;({});&#10;&#10;  useEffect(() =&gt; {&#10;    setCards([]);&#10;    setError(null);&#10;    setLoadingCount(0);&#10;    setFaceOverrides({});&#10;  }, [set]);&#10;&#10;  useEffect(() =&gt; {&#10;    if (!set) {&#10;      return;&#10;    }&#10;&#10;    const sortByCollectorNumber = (items: ScryfallCard[]) =&gt; {&#10;      return [...items].sort((a, b) =&gt; {&#10;        const aNum = parseInt(a.collector_number, 10);&#10;        const bNum = parseInt(b.collector_number, 10);&#10;&#10;        if (!Number.isNaN(aNum) &amp;&amp; !Number.isNaN(bNum)) {&#10;          return aNum - bNum;&#10;        }&#10;        if (!Number.isNaN(aNum)) {&#10;          return -1;&#10;        }&#10;        if (!Number.isNaN(bNum)) {&#10;          return 1;&#10;        }&#10;        return a.collector_number.localeCompare(b.collector_number, undefined, { numeric: true });&#10;      });&#10;    };&#10;&#10;    const fetchAllPages = async () =&gt; {&#10;      try {&#10;        setLoading(true);&#10;        setCards([]);&#10;        setLoadingCount(0);&#10;&#10;        let page = 1;&#10;        let hasMore = true;&#10;        let allCards: ScryfallCard[] = [];&#10;&#10;        while (hasMore) {&#10;          const response = await scryfallAPI.getCardsForSet(set.code.toLowerCase(), page);&#10;          const sortedPage = sortByCollectorNumber(response.data);&#10;          allCards = [...allCards, ...sortedPage];&#10;          setCards(allCards);&#10;          setLoadingCount(allCards.length);&#10;&#10;          hasMore = response.has_more;&#10;          page += 1;&#10;        }&#10;      } catch (err) {&#10;        setError(err instanceof Error ? err.message : 'Failed to load cards');&#10;      } finally {&#10;        setLoading(false);&#10;      }&#10;    };&#10;&#10;    fetchAllPages();&#10;  }, [set]);&#10;&#10;  const getCardQuantity = (scryfallId: string): number =&gt; {&#10;    const card = collectionCards.find(c =&gt; c.scryfallId === scryfallId);&#10;    return card ? card.quantity : 0;&#10;  };&#10;&#10;  const getCardColors = (card: ScryfallCard): string[] =&gt; {&#10;    if (card.color_identity &amp;&amp; card.color_identity.length &gt; 0) {&#10;      return card.color_identity;&#10;    }&#10;    const faceIdentity = card.card_faces?.flatMap(face =&gt; face.color_identity ?? []) ?? [];&#10;    if (faceIdentity.length &gt; 0) {&#10;      return Array.from(new Set(faceIdentity));&#10;    }&#10;    if (card.colors &amp;&amp; card.colors.length &gt; 0) {&#10;      return card.colors;&#10;    }&#10;    const faceColors = card.card_faces?.flatMap(face =&gt; face.colors ?? []) ?? [];&#10;    return Array.from(new Set(faceColors));&#10;  };&#10;&#10;  const getCardFaces = (card: ScryfallCard) =&gt; {&#10;    return (card.card_faces || [])&#10;      .map(face =&gt; ({&#10;        name: face.name,&#10;        imageUrl: face.image_uris?.normal,&#10;        smallImageUrl: face.image_uris?.small,&#10;      }))&#10;      .filter(face =&gt; !!face.imageUrl) as Array&lt;{ name: string; imageUrl: string; smallImageUrl?: string }&gt;;&#10;  };&#10;&#10;  const toggleFace = (cardId: string) =&gt; {&#10;    setFaceOverrides(prev =&gt; {&#10;      const current = prev[cardId] ?? 0;&#10;      return { ...prev, [cardId]: current === 0 ? 1 : 0 };&#10;    });&#10;  };&#10;&#10;  if (!set) {&#10;    return (&#10;      &lt;div className=&quot;card-gallery&quot;&gt;&#10;        &lt;div className=&quot;gallery-empty&quot;&gt;&#10;          &lt;p&gt; Select a set to browse cards&lt;/p&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    );&#10;  }&#10;&#10;  const handleAddCard = (scryfallCard: ScryfallCard) =&gt; {&#10;    const cardFaces = getCardFaces(scryfallCard);&#10;    const card: Card = {&#10;      id: Date.now() + Math.random(),&#10;      scryfallId: scryfallCard.id,&#10;      name: scryfallCard.name,&#10;      set: set.code,&#10;      setName: set.name,&#10;      setReleasedAt: set.released_at,&#10;      type: scryfallCard.type_line,&#10;      colors: sortColors(getCardColors(scryfallCard)),&#10;      quantity: 1,&#10;      imageUrl: scryfallAPI.getCardImageUrl(scryfallCard),&#10;      cardFaces,&#10;      collectorNumber: scryfallCard.collector_number,&#10;      oracleText: scryfallCard.oracle_text,&#10;    };&#10;    onAddCard(card);&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;card-gallery&quot;&gt;&#10;      &lt;div className=&quot;gallery-header&quot;&gt;&#10;        &lt;h3&gt;{set.name}&lt;/h3&gt;&#10;        &lt;p&gt;{loading ? `Loading ${loadingCount} cards...` : `${cards.length} cards loaded`}&lt;/p&gt;&#10;      &lt;/div&gt;&#10;&#10;      {error &amp;&amp; &lt;div className=&quot;gallery-error&quot;&gt;Error: {error}&lt;/div&gt;}&#10;&#10;      &lt;div className=&quot;gallery-grid&quot;&gt;&#10;        {cards.map(card =&gt; {&#10;          const faces = getCardFaces(card);&#10;          const faceIndex = faceOverrides[card.id] ?? 0;&#10;          const faceImage = faces[faceIndex]?.smallImageUrl || scryfallAPI.getCardSmallImageUrl(card);&#10;          const quantity = getCardQuantity(card.id);&#10;          return (&#10;            &lt;div key={`${card.id}-${card.collector_number}`} className=&quot;gallery-card-wrapper&quot;&gt;&#10;              &lt;div&#10;                className={`gallery-card ${quantity &gt; 0 ? 'in-collection' : ''}`}&#10;                onClick={() =&gt; handleAddCard(card)}&#10;                title={`${card.name} - ${card.type_line}`}&#10;              &gt;&#10;                &lt;img&#10;                  src={faceImage}&#10;                  alt={card.name}&#10;                  loading=&quot;lazy&quot;&#10;                /&gt;&#10;                {faces.length &gt; 1 &amp;&amp; (&#10;                  &lt;button&#10;                    type=&quot;button&quot;&#10;                    className=&quot;card-flip-btn&quot;&#10;                    onClick={(event) =&gt; {&#10;                      event.stopPropagation();&#10;                      toggleFace(card.id);&#10;                    }}&#10;                  &gt;&#10;                    Flip&#10;                  &lt;/button&gt;&#10;                )}&#10;                {quantity &gt; 0 &amp;&amp; (&#10;                  &lt;div className=&quot;in-collection-badge&quot;&gt;&#10;                    {quantity &gt;= 4 ? '✓' : `${quantity}/4`}&#10;                  &lt;/div&gt;&#10;                )}&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;card-name&quot;&gt;{card.name}&lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;&#10;      {loading &amp;&amp; &lt;div className=&quot;gallery-loading&quot;&gt;Loading cards...&lt;/div&gt;}&#10;&#10;      {!loading &amp;&amp; cards.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;gallery-end&quot;&gt;All cards loaded!&lt;/div&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default CardGallery;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="/CardList (snapshot).css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="/CardList (snapshot).css" />
              <option name="originalContent" value=".card-collection {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 24px;&#10;}&#10;&#10;.collection-header {&#10;  margin-bottom: 8px;&#10;}&#10;&#10;.collection-header h2 {&#10;  color: #e0e6ed;&#10;  font-size: 1.8rem;&#10;  margin: 0 0 8px 0;&#10;}&#10;&#10;.collection-stats {&#10;  color: #a0aec0;&#10;  font-size: 1rem;&#10;  margin: 0;&#10;}&#10;&#10;.collection-filters {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 16px;&#10;  margin-bottom: 24px;&#10;  padding: 20px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 12px;&#10;}&#10;&#10;.search-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));&#10;  gap: 12px;&#10;}&#10;&#10;.search-field {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 6px;&#10;}&#10;&#10;.search-label {&#10;  color: #a0aec0;&#10;  font-size: 0.8rem;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-weight: 600;&#10;}&#10;&#10;.search-box {&#10;  position: relative;&#10;  display: flex;&#10;  align-items: center;&#10;}&#10;&#10;.search-input {&#10;  flex: 1;&#10;  padding: 12px 16px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.04);&#10;  color: #e0e6ed;&#10;  font-size: 0.95rem;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.search-input:focus {&#10;  outline: none;&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.search-input::placeholder {&#10;  color: #8a9bb2;&#10;}&#10;&#10;.clear-search {&#10;  align-self: flex-start;&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #a0aec0;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.clear-search:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  color: #e0e6ed;&#10;}&#10;&#10;.color-filters {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 12px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.filter-label {&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  font-weight: 600;&#10;}&#10;&#10;.color-buttons {&#10;  display: flex;&#10;  gap: 8px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.color-filter-btn {&#10;  width: 36px;&#10;  height: 36px;&#10;  border-radius: 50%;&#10;  border: 2px solid transparent;&#10;  font-weight: 700;&#10;  font-size: 0.95rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;}&#10;&#10;.color-filter-btn:hover {&#10;  transform: scale(1.1);&#10;  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.color-filter-btn.active {&#10;  border-color: #fff;&#10;  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5), 0 4px 12px rgba(0, 0, 0, 0.4);&#10;  transform: scale(1.15);&#10;}&#10;&#10;.clear-filters {&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 100, 100, 0.3);&#10;  background: rgba(255, 100, 100, 0.1);&#10;  color: #ff8888;&#10;  font-size: 0.85rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.clear-filters:hover {&#10;  background: rgba(255, 100, 100, 0.2);&#10;  border-color: rgba(255, 100, 100, 0.5);&#10;}&#10;&#10;.rarity-filters {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 12px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.rarity-buttons {&#10;  display: flex;&#10;  gap: 8px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.rarity-filter-btn {&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.15);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  text-transform: capitalize;&#10;}&#10;&#10;.rarity-filter-btn:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  border-color: rgba(255, 255, 255, 0.3);&#10;}&#10;&#10;.rarity-filter-btn.active {&#10;  border-color: rgba(255, 255, 255, 0.5);&#10;  background: rgba(255, 255, 255, 0.15);&#10;  color: #fff;&#10;  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);&#10;}&#10;&#10;.rarity-common {&#10;  border-color: rgba(160, 174, 192, 0.5);&#10;  color: #cbd5e0;&#10;}&#10;&#10;.rarity-common.active {&#10;  border-color: rgba(160, 174, 192, 0.8);&#10;  background: rgba(160, 174, 192, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-uncommon {&#10;  border-color: rgba(90, 200, 250, 0.5);&#10;  color: #c3e7ff;&#10;}&#10;&#10;.rarity-uncommon.active {&#10;  border-color: rgba(90, 200, 250, 0.8);&#10;  background: rgba(90, 200, 250, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-rare {&#10;  border-color: rgba(255, 200, 120, 0.5);&#10;  color: #ffe1b6;&#10;}&#10;&#10;.rarity-rare.active {&#10;  border-color: rgba(255, 200, 120, 0.8);&#10;  background: rgba(255, 200, 120, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-mythic {&#10;  border-color: rgba(255, 120, 90, 0.6);&#10;  color: #ffd2c5;&#10;}&#10;&#10;.rarity-mythic.active {&#10;  border-color: rgba(255, 120, 90, 0.85);&#10;  background: rgba(255, 120, 90, 0.25);&#10;  color: #fff;&#10;}&#10;&#10;.foil-badge {&#10;  padding: 2px 6px;&#10;  border-radius: 999px;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-size: 0.65rem;&#10;  font-weight: 800;&#10;  border: 1px solid rgba(255, 215, 0, 0.8);&#10;  background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 165, 0, 0.15) 100%);&#10;  color: #ffd700;&#10;  box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);&#10;}&#10;&#10;.no-results {&#10;  text-align: center;&#10;  padding: 40px 20px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 12px;&#10;  margin-bottom: 24px;&#10;}&#10;&#10;.no-results p {&#10;  color: #a0aec0;&#10;  font-size: 1.1rem;&#10;  margin-bottom: 16px;&#10;}&#10;&#10;.reset-filters-btn {&#10;  padding: 10px 20px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(102, 126, 234, 0.4);&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #a0d4ff;&#10;  font-size: 0.95rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.reset-filters-btn:hover {&#10;  background: rgba(102, 126, 234, 0.3);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.set-group {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 12px;&#10;}&#10;&#10;.set-group-header {&#10;  color: #667eea;&#10;  font-size: 1.1rem;&#10;  margin: 0;&#10;  padding-bottom: 12px;&#10;  border-bottom: 2px solid rgba(102, 126, 234, 0.3);&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.5px;&#10;  font-weight: 600;&#10;}&#10;&#10;.set-group-header-row {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  gap: 12px;&#10;}&#10;&#10;.hide-set-btn {&#10;  padding: 6px 10px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #a0aec0;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hide-set-btn:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  color: #e0e6ed;&#10;}&#10;&#10;.hidden-sets {&#10;  border: 1px dashed rgba(255, 255, 255, 0.15);&#10;  border-radius: 10px;&#10;  padding: 12px;&#10;  margin-bottom: 20px;&#10;  background: rgba(255, 255, 255, 0.02);&#10;}&#10;&#10;.hidden-sets-header {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  margin-bottom: 10px;&#10;}&#10;&#10;.hidden-sets-title {&#10;  color: #a0aec0;&#10;  font-size: 0.85rem;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-weight: 600;&#10;}&#10;&#10;.hidden-sets-show-all {&#10;  padding: 6px 10px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(102, 126, 234, 0.4);&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #a0d4ff;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hidden-sets-show-all:hover {&#10;  background: rgba(102, 126, 234, 0.3);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.hidden-sets-list {&#10;  display: flex;&#10;  flex-wrap: wrap;&#10;  gap: 8px;&#10;}&#10;&#10;.hidden-set-pill {&#10;  padding: 6px 10px;&#10;  border-radius: 999px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #e0e6ed;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hidden-set-pill:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;}&#10;&#10;.set-cards-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));&#10;  gap: 16px;&#10;}&#10;&#10;.collection-card {&#10;  display: flex;&#10;  flex-direction: column;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 8px;&#10;  overflow: hidden;&#10;  transition: all 0.3s ease;&#10;}&#10;&#10;.collection-card:hover {&#10;  background: rgba(255, 255, 255, 0.08);&#10;  border-color: rgba(102, 126, 234, 0.3);&#10;  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);&#10;}&#10;&#10;.card-image-container {&#10;  width: 100%;&#10;  aspect-ratio: 63/88;&#10;  overflow: hidden;&#10;  background: rgba(0, 0, 0, 0.2);&#10;  position: relative;&#10;}&#10;&#10;.card-image-container .card-flip-btn {&#10;  position: absolute;&#10;  bottom: 6px;&#10;  left: 6px;&#10;  padding: 4px 6px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.35);&#10;  background: rgba(15, 20, 25, 0.7);&#10;  color: #e0e6ed;&#10;  font-size: 0.7rem;&#10;  cursor: pointer;&#10;  z-index: 2;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.card-image-container .card-flip-btn:hover {&#10;  background: rgba(102, 126, 234, 0.35);&#10;  border-color: rgba(102, 126, 234, 0.7);&#10;}&#10;&#10;.card-image {&#10;  width: 100%;&#10;  height: 100%;&#10;  object-fit: cover;&#10;  transition: transform 0.3s ease;&#10;}&#10;&#10;.collection-card:hover .card-image {&#10;  transform: scale(1.05);&#10;}&#10;&#10;.collection-card.foil-mode {&#10;  position: relative;&#10;  overflow: hidden;&#10;}&#10;&#10;.collection-card.foil-mode::before {&#10;  content: '';&#10;  position: absolute;&#10;  top: -50%;&#10;  left: -50%;&#10;  width: 200%;&#10;  height: 200%;&#10;  background: linear-gradient(&#10;    45deg,&#10;    transparent 30%,&#10;    rgba(255, 255, 255, 0.1) 40%,&#10;    rgba(255, 215, 0, 0.3) 45%,&#10;    rgba(255, 255, 255, 0.15) 50%,&#10;    rgba(255, 215, 0, 0.3) 55%,&#10;    rgba(255, 255, 255, 0.1) 60%,&#10;    transparent 70%&#10;  );&#10;  animation: foilShimmer 3s infinite linear;&#10;  pointer-events: none;&#10;  z-index: 1;&#10;}&#10;&#10;.collection-card.foil-mode:hover::before {&#10;  animation-duration: 2s;&#10;}&#10;&#10;@keyframes foilShimmer {&#10;  0% {&#10;    transform: translateX(-100%) translateY(-100%) rotate(45deg);&#10;  }&#10;  100% {&#10;    transform: translateX(100%) translateY(100%) rotate(45deg);&#10;  }&#10;}&#10;&#10;.foil-effect {&#10;  filter: brightness(1.1) saturate(1.2) contrast(1.05);&#10;}&#10;&#10;.collection-card.foil-mode .card-details {&#10;  position: relative;&#10;  z-index: 2;&#10;}&#10;&#10;.card-details {&#10;  padding: 12px;&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 8px;&#10;  flex: 1;&#10;}&#10;&#10;.card-controls {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  margin-top: 4px;&#10;}&#10;&#10;.quantity-control {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 6px;&#10;  flex: 1;&#10;  flex-wrap: nowrap;&#10;}&#10;&#10;.card-name {&#10;  color: #a0d4ff;&#10;  font-weight: 600;&#10;  font-size: 0.95rem;&#10;  line-height: 1.3;&#10;  margin: 0;&#10;  min-height: 1.3em;&#10;  max-height: 2.6em;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  display: -webkit-box;&#10;  -webkit-line-clamp: 2;&#10;  -webkit-box-orient: vertical;&#10;}&#10;&#10;.foil-indicator {&#10;  margin-left: 4px;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.card-type {&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  margin: 0;&#10;  opacity: 0.8;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  white-space: nowrap;&#10;  flex-shrink: 0;&#10;}&#10;&#10;.card-meta {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  font-size: 0.8rem;&#10;}&#10;&#10;.color-badges-container {&#10;  display: flex;&#10;  gap: 4px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.color-badge {&#10;  display: inline-flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  width: 22px;&#10;  height: 22px;&#10;  border-radius: 14px;&#10;  font-size: 0.75rem;&#10;  font-weight: 600;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.3px;&#10;  border: 1px solid transparent;&#10;  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.color-w {&#10;  background: linear-gradient(135deg, #f8f9d7 0%, #fffce8 100%);&#10;  color: #5a5630;&#10;  border-color: rgba(248, 249, 215, 0.4);&#10;}&#10;&#10;.color-u {&#10;  background: linear-gradient(135deg, #0e68ab 0%, #1e88c7 100%);&#10;  color: #e3f4ff;&#10;  border-color: rgba(30, 136, 199, 0.5);&#10;}&#10;&#10;.color-b {&#10;  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);&#10;  color: #c8c8c8;&#10;  border-color: rgba(100, 100, 100, 0.4);&#10;}&#10;&#10;.color-r {&#10;  background: linear-gradient(135deg, #d32f2f 0%, #e64a19 100%);&#10;  color: #ffe8e5;&#10;  border-color: rgba(230, 74, 25, 0.5);&#10;}&#10;&#10;.color-g {&#10;  background: linear-gradient(135deg, #00a152 0%, #4caf50 100%);&#10;  color: #e8f5e9;&#10;  border-color: rgba(76, 175, 80, 0.5);&#10;}&#10;&#10;.color-c {&#10;  background: linear-gradient(135deg, #787878 0%, #9e9e9e 100%);&#10;  color: #f5f5f5;&#10;  border-color: rgba(158, 158, 158, 0.4);&#10;}&#10;&#10;.empty-state {&#10;  text-align: center;&#10;  padding: 60px 20px;&#10;  color: #a0aec0;&#10;}&#10;&#10;.empty-state p {&#10;  font-size: 1.3rem;&#10;  margin-bottom: 10px;&#10;}&#10;&#10;.empty-subtitle {&#10;  font-size: 1rem;&#10;  opacity: 0.7;&#10;}&#10;&#10;.rarity-badge {&#10;  padding: 3px 8px;&#10;  border-radius: 999px;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-size: 0.65rem;&#10;  font-weight: 800;&#10;  border: 1px solid transparent;&#10;  background: rgba(255, 255, 255, 0.08);&#10;  color: #e0e6ed;&#10;  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);&#10;}&#10;&#10;.rarity-common {&#10;  border-color: rgba(160, 174, 192, 0.6);&#10;  color: #cbd5e0;&#10;  background: rgba(160, 174, 192, 0.12);&#10;}&#10;&#10;.rarity-uncommon {&#10;  border-color: rgba(90, 200, 250, 0.7);&#10;  color: #c3e7ff;&#10;  background: rgba(90, 200, 250, 0.15);&#10;}&#10;&#10;.rarity-rare {&#10;  border-color: rgba(255, 200, 120, 0.8);&#10;  color: #ffe1b6;&#10;  background: rgba(255, 200, 120, 0.18);&#10;}&#10;&#10;.rarity-mythic {&#10;  border-color: rgba(255, 120, 90, 0.85);&#10;  color: #ffd2c5;&#10;  background: rgba(255, 120, 90, 0.2);&#10;}&#10;&#10;.qty-btn {&#10;  padding: 4px 8px;&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #667eea;&#10;  border: 1px solid rgba(102, 126, 234, 0.3);&#10;  border-radius: 4px;&#10;  cursor: pointer;&#10;  font-weight: 600;&#10;  transition: all 0.2s ease;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.qty-btn:hover {&#10;  background: rgba(102, 126, 234, 0.4);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.quantity-input {&#10;  width: 50px;&#10;  padding: 4px 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.2);&#10;  border-radius: 4px;&#10;  background: rgba(255, 255, 255, 0.05);&#10;  color: #e0e6ed;&#10;  text-align: center;&#10;  font-size: 0.85rem;&#10;  font-weight: 500;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;/* Hide number input spinners */&#10;.quantity-input::-webkit-outer-spin-button,&#10;.quantity-input::-webkit-inner-spin-button {&#10;  -webkit-appearance: none;&#10;  margin: 0;&#10;}&#10;&#10;.quantity-input[type=number] {&#10;  -moz-appearance: textfield;&#10;}&#10;&#10;.quantity-input:focus {&#10;  outline: none;&#10;  border-color: #667eea;&#10;  background: rgba(255, 255, 255, 0.08);&#10;}&#10;&#10;.delete-btn {&#10;  padding: 4px 8px;&#10;  background: none;&#10;  border: 1px solid rgba(255, 100, 100, 0.2);&#10;  border-radius: 4px;&#10;  font-size: 0.9rem;&#10;  cursor:pointer;&#10;  transition: all 0.2s ease;&#10;  margin-left: 6px;&#10;}&#10;&#10;.delete-btn:hover {&#10;  background: rgba(255, 100, 100, 0.15);&#10;  border-color: rgba(255, 100, 100, 0.5);&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;  .set-cards-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));&#10;  }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;  .set-cards-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));&#10;    gap: 12px;&#10;  }&#10;&#10;  .card-details {&#10;    padding: 10px;&#10;    gap: 6px;&#10;  }&#10;&#10;  .card-name {&#10;    font-size: 0.85rem;&#10;  }&#10;&#10;  .card-type {&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .color-badges-container {&#10;    display: none;&#10;  }&#10;&#10;  .quantity-input {&#10;    width: 35px;&#10;    padding: 3px 4px;&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .qty-btn {&#10;    padding: 3px 6px;&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .delete-btn {&#10;    padding: 3px 6px;&#10;    font-size: 0.8rem;&#10;    margin-left: 4px;&#10;  }&#10;&#10;  .quantity-control {&#10;    gap: 4px;&#10;  }&#10;}&#10;" />
              <option name="updatedContent" value=".card-collection {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 24px;&#10;}&#10;&#10;.collection-header {&#10;  margin-bottom: 8px;&#10;}&#10;&#10;.collection-header h2 {&#10;  color: #e0e6ed;&#10;  font-size: 1.8rem;&#10;  margin: 0 0 8px 0;&#10;}&#10;&#10;.collection-stats {&#10;  color: #a0aec0;&#10;  font-size: 1rem;&#10;  margin: 0;&#10;}&#10;&#10;.collection-filters {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 16px;&#10;  margin-bottom: 24px;&#10;  padding: 20px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 12px;&#10;}&#10;&#10;.search-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));&#10;  gap: 12px;&#10;}&#10;&#10;.search-field {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 6px;&#10;}&#10;&#10;.search-label {&#10;  color: #a0aec0;&#10;  font-size: 0.8rem;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-weight: 600;&#10;}&#10;&#10;.search-box {&#10;  position: relative;&#10;  display: flex;&#10;  align-items: center;&#10;}&#10;&#10;.search-input {&#10;  flex: 1;&#10;  padding: 12px 16px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.04);&#10;  color: #e0e6ed;&#10;  font-size: 0.95rem;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.search-input:focus {&#10;  outline: none;&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;.search-input::placeholder {&#10;  color: #8a9bb2;&#10;}&#10;&#10;.clear-search {&#10;  align-self: flex-start;&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #a0aec0;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.clear-search:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  color: #e0e6ed;&#10;}&#10;&#10;.color-filters {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 12px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.filter-label {&#10;  color: #a0aec0;&#10;  font-size: 0.9rem;&#10;  font-weight: 600;&#10;}&#10;&#10;.color-buttons {&#10;  display: flex;&#10;  gap: 8px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.color-filter-btn {&#10;  width: 36px;&#10;  height: 36px;&#10;  border-radius: 50%;&#10;  border: 2px solid transparent;&#10;  font-weight: 700;&#10;  font-size: 0.95rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;}&#10;&#10;.color-filter-btn:hover {&#10;  transform: scale(1.1);&#10;  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.color-filter-btn.active {&#10;  border-color: #fff;&#10;  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.5), 0 4px 12px rgba(0, 0, 0, 0.4);&#10;  transform: scale(1.15);&#10;}&#10;&#10;.clear-filters {&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 100, 100, 0.3);&#10;  background: rgba(255, 100, 100, 0.1);&#10;  color: #ff8888;&#10;  font-size: 0.85rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.clear-filters:hover {&#10;  background: rgba(255, 100, 100, 0.2);&#10;  border-color: rgba(255, 100, 100, 0.5);&#10;}&#10;&#10;.rarity-filters {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 12px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.rarity-buttons {&#10;  display: flex;&#10;  gap: 8px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.rarity-filter-btn {&#10;  padding: 6px 12px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.15);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;  text-transform: capitalize;&#10;}&#10;&#10;.rarity-filter-btn:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  border-color: rgba(255, 255, 255, 0.3);&#10;}&#10;&#10;.rarity-filter-btn.active {&#10;  border-color: rgba(255, 255, 255, 0.5);&#10;  background: rgba(255, 255, 255, 0.15);&#10;  color: #fff;&#10;  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);&#10;}&#10;&#10;.rarity-common {&#10;  border-color: rgba(160, 174, 192, 0.5);&#10;  color: #cbd5e0;&#10;}&#10;&#10;.rarity-common.active {&#10;  border-color: rgba(160, 174, 192, 0.8);&#10;  background: rgba(160, 174, 192, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-uncommon {&#10;  border-color: rgba(90, 200, 250, 0.5);&#10;  color: #c3e7ff;&#10;}&#10;&#10;.rarity-uncommon.active {&#10;  border-color: rgba(90, 200, 250, 0.8);&#10;  background: rgba(90, 200, 250, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-rare {&#10;  border-color: rgba(255, 200, 120, 0.5);&#10;  color: #ffe1b6;&#10;}&#10;&#10;.rarity-rare.active {&#10;  border-color: rgba(255, 200, 120, 0.8);&#10;  background: rgba(255, 200, 120, 0.2);&#10;  color: #fff;&#10;}&#10;&#10;.rarity-mythic {&#10;  border-color: rgba(255, 120, 90, 0.6);&#10;  color: #ffd2c5;&#10;}&#10;&#10;.rarity-mythic.active {&#10;  border-color: rgba(255, 120, 90, 0.85);&#10;  background: rgba(255, 120, 90, 0.25);&#10;  color: #fff;&#10;}&#10;&#10;.foil-badge {&#10;  padding: 2px 6px;&#10;  border-radius: 999px;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-size: 0.65rem;&#10;  font-weight: 800;&#10;  border: 1px solid rgba(255, 215, 0, 0.8);&#10;  background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 165, 0, 0.15) 100%);&#10;  color: #ffd700;&#10;  box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);&#10;}&#10;&#10;.no-results {&#10;  text-align: center;&#10;  padding: 40px 20px;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 12px;&#10;  margin-bottom: 24px;&#10;}&#10;&#10;.no-results p {&#10;  color: #a0aec0;&#10;  font-size: 1.1rem;&#10;  margin-bottom: 16px;&#10;}&#10;&#10;.reset-filters-btn {&#10;  padding: 10px 20px;&#10;  border-radius: 8px;&#10;  border: 1px solid rgba(102, 126, 234, 0.4);&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #a0d4ff;&#10;  font-size: 0.95rem;&#10;  font-weight: 600;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.reset-filters-btn:hover {&#10;  background: rgba(102, 126, 234, 0.3);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.set-group {&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 12px;&#10;}&#10;&#10;.set-group-header {&#10;  color: #667eea;&#10;  font-size: 1.1rem;&#10;  margin: 0;&#10;  padding-bottom: 12px;&#10;  border-bottom: 2px solid rgba(102, 126, 234, 0.3);&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.5px;&#10;  font-weight: 600;&#10;}&#10;&#10;.set-group-header-row {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  gap: 12px;&#10;}&#10;&#10;.hide-set-btn {&#10;  padding: 6px 10px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #a0aec0;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hide-set-btn:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;  color: #e0e6ed;&#10;}&#10;&#10;.hidden-sets {&#10;  border: 1px dashed rgba(255, 255, 255, 0.15);&#10;  border-radius: 10px;&#10;  padding: 12px;&#10;  margin-bottom: 20px;&#10;  background: rgba(255, 255, 255, 0.02);&#10;}&#10;&#10;.hidden-sets-header {&#10;  display: flex;&#10;  align-items: center;&#10;  justify-content: space-between;&#10;  margin-bottom: 10px;&#10;}&#10;&#10;.hidden-sets-title {&#10;  color: #a0aec0;&#10;  font-size: 0.85rem;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-weight: 600;&#10;}&#10;&#10;.hidden-sets-show-all {&#10;  padding: 6px 10px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(102, 126, 234, 0.4);&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #a0d4ff;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hidden-sets-show-all:hover {&#10;  background: rgba(102, 126, 234, 0.3);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.hidden-sets-list {&#10;  display: flex;&#10;  flex-wrap: wrap;&#10;  gap: 8px;&#10;}&#10;&#10;.hidden-set-pill {&#10;  padding: 6px 10px;&#10;  border-radius: 999px;&#10;  border: 1px solid rgba(255, 255, 255, 0.12);&#10;  background: rgba(255, 255, 255, 0.06);&#10;  color: #e0e6ed;&#10;  font-size: 0.8rem;&#10;  cursor: pointer;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.hidden-set-pill:hover {&#10;  background: rgba(255, 255, 255, 0.12);&#10;}&#10;&#10;.set-cards-grid {&#10;  display: grid;&#10;  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));&#10;  gap: 16px;&#10;}&#10;&#10;.collection-card {&#10;  display: flex;&#10;  flex-direction: column;&#10;  background: rgba(255, 255, 255, 0.03);&#10;  border: 1px solid rgba(255, 255, 255, 0.1);&#10;  border-radius: 8px;&#10;  overflow: hidden;&#10;  transition: all 0.3s ease;&#10;}&#10;&#10;.collection-card:hover {&#10;  background: rgba(255, 255, 255, 0.08);&#10;  border-color: rgba(102, 126, 234, 0.3);&#10;  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);&#10;}&#10;&#10;.card-image-container {&#10;  width: 100%;&#10;  aspect-ratio: 63/88;&#10;  overflow: hidden;&#10;  background: rgba(0, 0, 0, 0.2);&#10;  position: relative;&#10;}&#10;&#10;.card-image-container .card-flip-btn {&#10;  position: absolute;&#10;  bottom: 6px;&#10;  left: 6px;&#10;  padding: 4px 6px;&#10;  border-radius: 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.35);&#10;  background: rgba(15, 20, 25, 0.7);&#10;  color: #e0e6ed;&#10;  font-size: 0.7rem;&#10;  cursor: pointer;&#10;  z-index: 2;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;.card-image-container .card-flip-btn:hover {&#10;  background: rgba(102, 126, 234, 0.35);&#10;  border-color: rgba(102, 126, 234, 0.7);&#10;}&#10;&#10;.card-image {&#10;  width: 100%;&#10;  height: 100%;&#10;  object-fit: cover;&#10;  transition: transform 0.3s ease;&#10;}&#10;&#10;.collection-card:hover .card-image {&#10;  transform: scale(1.05);&#10;}&#10;&#10;.collection-card.foil-mode {&#10;  position: relative;&#10;  overflow: hidden;&#10;}&#10;&#10;.collection-card.foil-mode::before {&#10;  content: '';&#10;  position: absolute;&#10;  top: -50%;&#10;  left: -50%;&#10;  width: 200%;&#10;  height: 200%;&#10;  background: linear-gradient(&#10;    45deg,&#10;    transparent 25%,&#10;    rgba(255, 0, 0, 0.2) 30%,&#10;    rgba(255, 165, 0, 0.25) 35%,&#10;    rgba(255, 255, 0, 0.3) 40%,&#10;    rgba(0, 255, 0, 0.25) 45%,&#10;    rgba(0, 255, 255, 0.3) 50%,&#10;    rgba(0, 100, 255, 0.25) 55%,&#10;    rgba(138, 43, 226, 0.3) 60%,&#10;    rgba(255, 255, 255, 0.15) 65%,&#10;    transparent 75%&#10;  );&#10;  animation: foilShimmer 3s infinite linear;&#10;  pointer-events: none;&#10;  z-index: 1;&#10;}&#10;&#10;.collection-card.foil-mode:hover::before {&#10;  animation-duration: 2s;&#10;}&#10;&#10;@keyframes foilShimmer {&#10;  0% {&#10;    transform: translateX(-100%) translateY(-100%) rotate(45deg);&#10;  }&#10;  100% {&#10;    transform: translateX(100%) translateY(100%) rotate(45deg);&#10;  }&#10;}&#10;&#10;.foil-effect {&#10;  filter: brightness(1.1) saturate(1.2) contrast(1.05);&#10;}&#10;&#10;.collection-card.foil-mode .card-details {&#10;  position: relative;&#10;  z-index: 2;&#10;}&#10;&#10;.card-details {&#10;  padding: 12px;&#10;  display: flex;&#10;  flex-direction: column;&#10;  gap: 8px;&#10;  flex: 1;&#10;}&#10;&#10;.card-controls {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  margin-top: 4px;&#10;}&#10;&#10;.quantity-control {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 6px;&#10;  flex: 1;&#10;  flex-wrap: nowrap;&#10;}&#10;&#10;.card-name {&#10;  color: #a0d4ff;&#10;  font-weight: 600;&#10;  font-size: 0.95rem;&#10;  line-height: 1.3;&#10;  margin: 0;&#10;  min-height: 1.3em;&#10;  max-height: 2.6em;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  display: -webkit-box;&#10;  -webkit-line-clamp: 2;&#10;  -webkit-box-orient: vertical;&#10;}&#10;&#10;.foil-indicator {&#10;  margin-left: 4px;&#10;  font-size: 0.9rem;&#10;}&#10;&#10;.card-type {&#10;  color: #e0e6ed;&#10;  font-size: 0.85rem;&#10;  margin: 0;&#10;  opacity: 0.8;&#10;  overflow: hidden;&#10;  text-overflow: ellipsis;&#10;  white-space: nowrap;&#10;  flex-shrink: 0;&#10;}&#10;&#10;.card-meta {&#10;  display: flex;&#10;  align-items: center;&#10;  gap: 8px;&#10;  font-size: 0.8rem;&#10;}&#10;&#10;.color-badges-container {&#10;  display: flex;&#10;  gap: 4px;&#10;  flex-wrap: wrap;&#10;}&#10;&#10;.color-badge {&#10;  display: inline-flex;&#10;  align-items: center;&#10;  justify-content: center;&#10;  width: 22px;&#10;  height: 22px;&#10;  border-radius: 14px;&#10;  font-size: 0.75rem;&#10;  font-weight: 600;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.3px;&#10;  border: 1px solid transparent;&#10;  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);&#10;}&#10;&#10;.color-w {&#10;  background: linear-gradient(135deg, #f8f9d7 0%, #fffce8 100%);&#10;  color: #5a5630;&#10;  border-color: rgba(248, 249, 215, 0.4);&#10;}&#10;&#10;.color-u {&#10;  background: linear-gradient(135deg, #0e68ab 0%, #1e88c7 100%);&#10;  color: #e3f4ff;&#10;  border-color: rgba(30, 136, 199, 0.5);&#10;}&#10;&#10;.color-b {&#10;  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);&#10;  color: #c8c8c8;&#10;  border-color: rgba(100, 100, 100, 0.4);&#10;}&#10;&#10;.color-r {&#10;  background: linear-gradient(135deg, #d32f2f 0%, #e64a19 100%);&#10;  color: #ffe8e5;&#10;  border-color: rgba(230, 74, 25, 0.5);&#10;}&#10;&#10;.color-g {&#10;  background: linear-gradient(135deg, #00a152 0%, #4caf50 100%);&#10;  color: #e8f5e9;&#10;  border-color: rgba(76, 175, 80, 0.5);&#10;}&#10;&#10;.color-c {&#10;  background: linear-gradient(135deg, #787878 0%, #9e9e9e 100%);&#10;  color: #f5f5f5;&#10;  border-color: rgba(158, 158, 158, 0.4);&#10;}&#10;&#10;.empty-state {&#10;  text-align: center;&#10;  padding: 60px 20px;&#10;  color: #a0aec0;&#10;}&#10;&#10;.empty-state p {&#10;  font-size: 1.3rem;&#10;  margin-bottom: 10px;&#10;}&#10;&#10;.empty-subtitle {&#10;  font-size: 1rem;&#10;  opacity: 0.7;&#10;}&#10;&#10;.rarity-badge {&#10;  padding: 3px 8px;&#10;  border-radius: 999px;&#10;  text-transform: uppercase;&#10;  letter-spacing: 0.4px;&#10;  font-size: 0.65rem;&#10;  font-weight: 800;&#10;  border: 1px solid transparent;&#10;  background: rgba(255, 255, 255, 0.08);&#10;  color: #e0e6ed;&#10;  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);&#10;}&#10;&#10;.rarity-common {&#10;  border-color: rgba(160, 174, 192, 0.6);&#10;  color: #cbd5e0;&#10;  background: rgba(160, 174, 192, 0.12);&#10;}&#10;&#10;.rarity-uncommon {&#10;  border-color: rgba(90, 200, 250, 0.7);&#10;  color: #c3e7ff;&#10;  background: rgba(90, 200, 250, 0.15);&#10;}&#10;&#10;.rarity-rare {&#10;  border-color: rgba(255, 200, 120, 0.8);&#10;  color: #ffe1b6;&#10;  background: rgba(255, 200, 120, 0.18);&#10;}&#10;&#10;.rarity-mythic {&#10;  border-color: rgba(255, 120, 90, 0.85);&#10;  color: #ffd2c5;&#10;  background: rgba(255, 120, 90, 0.2);&#10;}&#10;&#10;.qty-btn {&#10;  padding: 4px 8px;&#10;  background: rgba(102, 126, 234, 0.2);&#10;  color: #667eea;&#10;  border: 1px solid rgba(102, 126, 234, 0.3);&#10;  border-radius: 4px;&#10;  cursor: pointer;&#10;  font-weight: 600;&#10;  transition: all 0.2s ease;&#10;  font-size: 0.85rem;&#10;}&#10;&#10;.qty-btn:hover {&#10;  background: rgba(102, 126, 234, 0.4);&#10;  border-color: rgba(102, 126, 234, 0.6);&#10;}&#10;&#10;.quantity-input {&#10;  width: 50px;&#10;  padding: 4px 6px;&#10;  border: 1px solid rgba(255, 255, 255, 0.2);&#10;  border-radius: 4px;&#10;  background: rgba(255, 255, 255, 0.05);&#10;  color: #e0e6ed;&#10;  text-align: center;&#10;  font-size: 0.85rem;&#10;  font-weight: 500;&#10;  transition: all 0.2s ease;&#10;}&#10;&#10;/* Hide number input spinners */&#10;.quantity-input::-webkit-outer-spin-button,&#10;.quantity-input::-webkit-inner-spin-button {&#10;  -webkit-appearance: none;&#10;  margin: 0;&#10;}&#10;&#10;.quantity-input[type=number] {&#10;  -moz-appearance: textfield;&#10;}&#10;&#10;.quantity-input:focus {&#10;  outline: none;&#10;  border-color: #667eea;&#10;  background: rgba(255, 255, 255, 0.08);&#10;}&#10;&#10;.delete-btn {&#10;  padding: 4px 8px;&#10;  background: none;&#10;  border: 1px solid rgba(255, 100, 100, 0.2);&#10;  border-radius: 4px;&#10;  font-size: 0.9rem;&#10;  cursor:pointer;&#10;  transition: all 0.2s ease;&#10;  margin-left: 6px;&#10;}&#10;&#10;.delete-btn:hover {&#10;  background: rgba(255, 100, 100, 0.15);&#10;  border-color: rgba(255, 100, 100, 0.5);&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;  .set-cards-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));&#10;  }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;  .set-cards-grid {&#10;    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));&#10;    gap: 12px;&#10;  }&#10;&#10;  .card-details {&#10;    padding: 10px;&#10;    gap: 6px;&#10;  }&#10;&#10;  .card-name {&#10;    font-size: 0.85rem;&#10;  }&#10;&#10;  .card-type {&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .color-badges-container {&#10;    display: none;&#10;  }&#10;&#10;  .quantity-input {&#10;    width: 35px;&#10;    padding: 3px 4px;&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .qty-btn {&#10;    padding: 3px 6px;&#10;    font-size: 0.75rem;&#10;  }&#10;&#10;  .delete-btn {&#10;    padding: 3px 6px;&#10;    font-size: 0.8rem;&#10;    margin-left: 4px;&#10;  }&#10;&#10;  .quantity-control {&#10;    gap: 4px;&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="/CardList (snapshot).tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="/CardList (snapshot).tsx" />
              <option name="originalContent" value="import React, { useState } from 'react';&#10;import Card from '../types/Card';&#10;import '../styles/CardList.css';&#10;&#10;interface CardListProps {&#10;  cards: Card[];&#10;  onRemoveCard: (id: number) =&gt; void;&#10;  onUpdateQuantity: (id: number, quantity: number) =&gt; void;&#10;}&#10;&#10;type SortMode = 'default' | 'price-asc' | 'price-desc';&#10;&#10;const CardList: React.FC&lt;CardListProps&gt; = ({ cards, onRemoveCard, onUpdateQuantity }) =&gt; {&#10;  const [nameQuery, setNameQuery] = useState('');&#10;  const [setQuery, setSetQuery] = useState('');&#10;  const [typeQuery, setTypeQuery] = useState('');&#10;  const [oracleQuery, setOracleQuery] = useState('');&#10;  const [selectedColors, setSelectedColors] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [selectedRarities, setSelectedRarities] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [hiddenSets, setHiddenSets] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [faceOverrides, setFaceOverrides] = useState&lt;Record&lt;number, number&gt;&gt;({});&#10;  const [sortMode, setSortMode] = useState&lt;SortMode&gt;('default');&#10;&#10;  const allColors = ['W', 'U', 'B', 'R', 'G', 'C'];&#10;  const colorNames: Record&lt;string, string&gt; = {&#10;    'W': 'White',&#10;    'U': 'Blue',&#10;    'B': 'Black',&#10;    'R': 'Red',&#10;    'G': 'Green',&#10;    'C': 'Colorless'&#10;  };&#10;&#10;  const allRarities = ['common', 'uncommon', 'rare', 'mythic'];&#10;  const rarityNames: Record&lt;string, string&gt; = {&#10;    'common': 'Common',&#10;    'uncommon': 'Uncommon',&#10;    'rare': 'Rare',&#10;    'mythic': 'Mythic'&#10;  };&#10;&#10;  // Sort colors in WUBRG order&#10;  const sortColors = (colors: string[]): string[] =&gt; {&#10;    const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4, 'C': 5 };&#10;    return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;  };&#10;&#10;  const toggleColor = (color: string) =&gt; {&#10;    const newColors = new Set(selectedColors);&#10;    if (newColors.has(color)) {&#10;      newColors.delete(color);&#10;    } else {&#10;      newColors.add(color);&#10;    }&#10;    setSelectedColors(newColors);&#10;  };&#10;&#10;  const toggleRarity = (rarity: string) =&gt; {&#10;    const newRarities = new Set(selectedRarities);&#10;    if (newRarities.has(rarity)) {&#10;      newRarities.delete(rarity);&#10;    } else {&#10;      newRarities.add(rarity);&#10;    }&#10;    setSelectedRarities(newRarities);&#10;  };&#10;&#10;  const filteredCards = cards.filter(card =&gt; {&#10;    // Rarity filter&#10;    if (selectedRarities.size &gt; 0) {&#10;      const cardRarity = card.rarity?.toLowerCase();&#10;      if (!cardRarity || !selectedRarities.has(cardRarity)) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    // Color filter&#10;    if (selectedColors.size &gt; 0) {&#10;      // For colorless cards&#10;      if (card.colors.length === 0 &amp;&amp; !selectedColors.has('C')) {&#10;        return false;&#10;      }&#10;      // For colored cards, check if any selected color matches&#10;      if (card.colors.length &gt; 0) {&#10;        const hasMatchingColor = card.colors.some(color =&gt; selectedColors.has(color));&#10;        if (!hasMatchingColor) {&#10;          return false;&#10;        }&#10;      }&#10;    }&#10;&#10;    const nameTerm = nameQuery.trim().toLowerCase();&#10;    if (nameTerm &amp;&amp; !card.name.toLowerCase().includes(nameTerm)) {&#10;      return false;&#10;    }&#10;&#10;    const setTerm = setQuery.trim().toLowerCase();&#10;    if (setTerm) {&#10;      const matchesSetName = card.setName.toLowerCase().includes(setTerm);&#10;      const matchesSetCode = card.set.toLowerCase().includes(setTerm);&#10;      if (!matchesSetName &amp;&amp; !matchesSetCode) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    const typeTerm = typeQuery.trim().toLowerCase();&#10;    if (typeTerm &amp;&amp; !card.type.toLowerCase().includes(typeTerm)) {&#10;      return false;&#10;    }&#10;&#10;    const oracleTerm = oracleQuery.trim().toLowerCase();&#10;    if (oracleTerm) {&#10;      const oracleText = card.oracleText?.toLowerCase() || '';&#10;      if (!oracleText.includes(oracleTerm)) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    return true;&#10;  });&#10;&#10;  // Apply sorting&#10;  const sortedAndFilteredCards = (() =&gt; {&#10;    const cardsCopy = [...filteredCards];&#10;    if (sortMode === 'price-asc') {&#10;      return cardsCopy.sort((a, b) =&gt; {&#10;        const priceA = a.priceEur || 0;&#10;        const priceB = b.priceEur || 0;&#10;        return priceA - priceB;&#10;      });&#10;    } else if (sortMode === 'price-desc') {&#10;      return cardsCopy.sort((a, b) =&gt; {&#10;        const priceA = a.priceEur || 0;&#10;        const priceB = b.priceEur || 0;&#10;        return priceB - priceA;&#10;      });&#10;    }&#10;    return cardsCopy;&#10;  })();&#10;&#10;  if (cards.length === 0) {&#10;    return (&#10;      &lt;div className=&quot;empty-state&quot;&gt;&#10;        &lt;p&gt; No cards in your collection yet&lt;/p&gt;&#10;        &lt;p className=&quot;empty-subtitle&quot;&gt;Browse sets and click cards to add them!&lt;/p&gt;&#10;      &lt;/div&gt;&#10;    );&#10;  }&#10;&#10;  // Group cards by set only in default sort mode&#10;  const cardsBySet = sortMode === 'default'&#10;    ? sortedAndFilteredCards.reduce((acc, card) =&gt; {&#10;        if (!acc[card.setName]) {&#10;          acc[card.setName] = [];&#10;        }&#10;        acc[card.setName].push(card);&#10;        return acc;&#10;      }, {} as Record&lt;string, Card[]&gt;)&#10;    : {};&#10;&#10;  const sortSetsByRelease = (entries: Array&lt;[string, Card[]]&gt;) =&gt; {&#10;    return [...entries].sort(([, aCards], [, bCards]) =&gt; {&#10;      const aDate = aCards[0]?.setReleasedAt ? new Date(aCards[0].setReleasedAt) : null;&#10;      const bDate = bCards[0]?.setReleasedAt ? new Date(bCards[0].setReleasedAt) : null;&#10;&#10;      if (aDate &amp;&amp; bDate) {&#10;        return bDate.getTime() - aDate.getTime();&#10;      }&#10;      if (aDate) {&#10;        return -1;&#10;      }&#10;      if (bDate) {&#10;        return 1;&#10;      }&#10;      return 0;&#10;    });&#10;  };&#10;&#10;  const sortByCollectorNumber = (items: Card[]): Card[] =&gt; {&#10;    return [...items].sort((a, b) =&gt; {&#10;      const aNum = parseInt(a.collectorNumber, 10);&#10;      const bNum = parseInt(b.collectorNumber, 10);&#10;&#10;      if (!Number.isNaN(aNum) &amp;&amp; !Number.isNaN(bNum)) {&#10;        return aNum - bNum;&#10;      }&#10;      if (!Number.isNaN(aNum)) {&#10;        return -1;&#10;      }&#10;      if (!Number.isNaN(bNum)) {&#10;        return 1;&#10;      }&#10;      return a.collectorNumber.localeCompare(b.collectorNumber, undefined, { numeric: true });&#10;    });&#10;  };&#10;&#10;  const toggleHiddenSet = (setName: string) =&gt; {&#10;    const next = new Set(hiddenSets);&#10;    if (next.has(setName)) {&#10;      next.delete(setName);&#10;    } else {&#10;      next.add(setName);&#10;    }&#10;    setHiddenSets(next);&#10;  };&#10;&#10;  const toggleFace = (cardId: number) =&gt; {&#10;    setFaceOverrides(prev =&gt; {&#10;      const current = prev[cardId] ?? 0;&#10;      return { ...prev, [cardId]: current === 0 ? 1 : 0 };&#10;    });&#10;  };&#10;&#10;  const visibleEntries = sortSetsByRelease(Object.entries(cardsBySet))&#10;    .filter(([setName]) =&gt; !hiddenSets.has(setName));&#10;&#10;  const hiddenEntries = sortSetsByRelease(Object.entries(cardsBySet))&#10;    .filter(([setName]) =&gt; hiddenSets.has(setName));&#10;&#10;  // Calculate total collection value&#10;  const totalValue = sortedAndFilteredCards.reduce((sum, card) =&gt; {&#10;    const cardValue = (card.priceEur || 0) * card.quantity;&#10;    return sum + cardValue;&#10;  }, 0);&#10;&#10;  return (&#10;    &lt;div className=&quot;card-collection&quot;&gt;&#10;      &lt;div className=&quot;collection-header&quot;&gt;&#10;        &lt;h2&gt;Your Collection&lt;/h2&gt;&#10;        &lt;div className=&quot;collection-stats&quot;&gt;&#10;          &lt;span&gt;Showing {sortedAndFilteredCards.length} of {cards.length} cards&lt;/span&gt;&#10;          {totalValue &gt; 0 &amp;&amp; (&#10;            &lt;span className=&quot;collection-value&quot;&gt;&#10;              Total Value: €{totalValue.toFixed(2)}&#10;            &lt;/span&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div className=&quot;collection-filters&quot;&gt;&#10;        &lt;div className=&quot;search-grid&quot;&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-name&quot;&gt;Name&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-name&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Lightning Bolt&quot;&#10;              value={nameQuery}&#10;              onChange={(e) =&gt; setNameQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-set&quot;&gt;Set (name/code)&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-set&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Modern Horizons or mh2&quot;&#10;              value={setQuery}&#10;              onChange={(e) =&gt; setSetQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-type&quot;&gt;Type&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-type&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Creature&quot;&#10;              value={typeQuery}&#10;              onChange={(e) =&gt; setTypeQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-oracle&quot;&gt;Oracle text&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-oracle&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. draw a card&quot;&#10;              value={oracleQuery}&#10;              onChange={(e) =&gt; setOracleQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        {(nameQuery || setQuery || typeQuery || oracleQuery) &amp;&amp; (&#10;          &lt;button&#10;            className=&quot;clear-search&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;            }}&#10;          &gt;&#10;            Clear search&#10;          &lt;/button&gt;&#10;        )}&#10;&#10;        &lt;div className=&quot;color-filters&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Colors:&lt;/span&gt;&#10;          &lt;div className=&quot;color-buttons&quot;&gt;&#10;            {allColors.map(color =&gt; (&#10;              &lt;button&#10;                key={color}&#10;                className={`color-filter-btn color-${color.toLowerCase()} ${selectedColors.has(color) ? 'active' : ''}`}&#10;                onClick={() =&gt; toggleColor(color)}&#10;                title={colorNames[color]}&#10;              &gt;&#10;                {color}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;          {selectedColors.size &gt; 0 &amp;&amp; (&#10;            &lt;button&#10;              className=&quot;clear-filters&quot;&#10;              onClick={() =&gt; setSelectedColors(new Set())}&#10;            &gt;&#10;              Clear filters&#10;            &lt;/button&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        &lt;div className=&quot;rarity-filters&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Rarity:&lt;/span&gt;&#10;          &lt;div className=&quot;rarity-buttons&quot;&gt;&#10;            {allRarities.map(rarity =&gt; (&#10;              &lt;button&#10;                key={rarity}&#10;                className={`rarity-filter-btn rarity-${rarity} ${selectedRarities.has(rarity) ? 'active' : ''}`}&#10;                onClick={() =&gt; toggleRarity(rarity)}&#10;                title={rarityNames[rarity]}&#10;              &gt;&#10;                {rarityNames[rarity]}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;          {selectedRarities.size &gt; 0 &amp;&amp; (&#10;            &lt;button&#10;              className=&quot;clear-filters&quot;&#10;              onClick={() =&gt; setSelectedRarities(new Set())}&#10;            &gt;&#10;              Clear filters&#10;            &lt;/button&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        &lt;div className=&quot;sort-options&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Sort by:&lt;/span&gt;&#10;          &lt;div className=&quot;sort-buttons&quot;&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'default' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('default')}&#10;              title=&quot;Default sorting (by set and collector number)&quot;&#10;            &gt;&#10;              Default&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'price-asc' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('price-asc')}&#10;              title=&quot;Sort by price ascending (lowest first)&quot;&#10;            &gt;&#10;              Price ↑&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'price-desc' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('price-desc')}&#10;              title=&quot;Sort by price descending (highest first)&quot;&#10;            &gt;&#10;              Price ↓&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {Object.keys(cardsBySet).length === 0 &amp;&amp; sortMode === 'default' &amp;&amp; (&#10;        &lt;div className=&quot;no-results&quot;&gt;&#10;          &lt;p&gt;No cards match your search criteria&lt;/p&gt;&#10;          &lt;button&#10;            className=&quot;reset-filters-btn&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;              setSelectedColors(new Set());&#10;            }}&#10;          &gt;&#10;            Reset all filters&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode !== 'default' &amp;&amp; sortedAndFilteredCards.length === 0 &amp;&amp; (&#10;        &lt;div className=&quot;no-results&quot;&gt;&#10;          &lt;p&gt;No cards match your search criteria&lt;/p&gt;&#10;          &lt;button&#10;            className=&quot;reset-filters-btn&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;              setSelectedColors(new Set());&#10;            }}&#10;          &gt;&#10;            Reset all filters&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode !== 'default' &amp;&amp; sortedAndFilteredCards.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;set-cards-grid&quot;&gt;&#10;          {sortedAndFilteredCards.map(card =&gt; {&#10;            const sortedColors = card.colors.length === 0 ? [] : sortColors(card.colors);&#10;            const faces = card.cardFaces || [];&#10;            const faceIndex = faceOverrides[card.id] ?? 0;&#10;            const faceImage = faces[faceIndex]?.imageUrl || card.imageUrl;&#10;            return (&#10;              &lt;div key={card.id} className={`collection-card ${card.isFoil ? 'foil-mode' : ''}`}&gt;&#10;                &lt;div className=&quot;card-image-container&quot;&gt;&#10;                  &lt;img&#10;                   src={faceImage}&#10;                    alt={card.name}&#10;                    className={`card-image ${card.isFoil ? 'foil-effect' : ''}`}&#10;                  /&gt;&#10;                 {faces.length &gt; 1 &amp;&amp; (&#10;                   &lt;button&#10;                     type=&quot;button&quot;&#10;                     className=&quot;card-flip-btn&quot;&#10;                     onClick={(event) =&gt; {&#10;                       event.stopPropagation();&#10;                       toggleFace(card.id);&#10;                     }}&#10;                   &gt;&#10;                     Flip&#10;                   &lt;/button&gt;&#10;                 )}&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;card-details&quot;&gt;&#10;                  &lt;div className=&quot;card-name&quot;&gt;&#10;                    {card.name}&#10;                    {card.isFoil &amp;&amp; &lt;span className=&quot;foil-indicator&quot;&gt;✨&lt;/span&gt;}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;card-type&quot;&gt;{card.type}&lt;/div&gt;&#10;                  &lt;div className=&quot;card-meta&quot;&gt;&#10;                    &lt;div className=&quot;color-badges-container&quot;&gt;&#10;                      {sortedColors.length === 0 ? (&#10;                        &lt;span className=&quot;color-badge color-c&quot;&gt;C&lt;/span&gt;&#10;                      ) : (&#10;                        sortedColors.map(color =&gt; (&#10;                          &lt;span key={color} className={`color-badge color-${color.toLowerCase()}`}&gt;&#10;                            {color}&#10;                          &lt;/span&gt;&#10;                        ))&#10;                      )}&#10;                    &lt;/div&gt;&#10;                    {card.rarity &amp;&amp; (&#10;                      &lt;span className={`rarity-badge rarity-${card.rarity.toLowerCase()}`}&gt;&#10;                        {card.rarity}&#10;                      &lt;/span&gt;&#10;                    )}&#10;                    {card.isFoil &amp;&amp; (&#10;                      &lt;span className=&quot;foil-badge&quot;&gt;Foil&lt;/span&gt;&#10;                    )}&#10;                    &lt;span className=&quot;card-number&quot;&gt;#{card.collectorNumber}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                  {card.priceEur !== undefined &amp;&amp; (&#10;                    &lt;div className=&quot;card-price&quot;&gt;&#10;                      &lt;span className=&quot;price-label&quot;&gt;Price:&lt;/span&gt;&#10;                      &lt;span className=&quot;price-value&quot;&gt;€{card.priceEur.toFixed(2)}&lt;/span&gt;&#10;                      {card.quantity &gt; 1 &amp;&amp; (&#10;                        &lt;span className=&quot;price-total&quot;&gt;&#10;                          (€{(card.priceEur * card.quantity).toFixed(2)} total)&#10;                        &lt;/span&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;                  )}&#10;                  &lt;div className=&quot;card-controls&quot;&gt;&#10;                    &lt;div className=&quot;quantity-control&quot;&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onUpdateQuantity(card.id, Math.max(1, card.quantity - 1))}&#10;                        className=&quot;qty-btn&quot;&#10;                      &gt;&#10;                        −&#10;                      &lt;/button&gt;&#10;                      &lt;input&#10;                        type=&quot;number&quot;&#10;                        min=&quot;1&quot;&#10;                        max=&quot;999&quot;&#10;                        value={card.quantity}&#10;                        onChange={(e) =&gt; onUpdateQuantity(card.id, parseInt(e.target.value) || 1)}&#10;                        className=&quot;quantity-input&quot;&#10;                      /&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onUpdateQuantity(card.id, card.quantity + 1)}&#10;                        className=&quot;qty-btn&quot;&#10;                      &gt;&#10;                        +&#10;                      &lt;/button&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onRemoveCard(card.id)}&#10;                        className=&quot;delete-btn&quot;&#10;                        title=&quot;Remove card&quot;&#10;                      &gt;&#10;                        ️&#10;                      &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            );&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode === 'default' &amp;&amp; hiddenEntries.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;hidden-sets&quot;&gt;&#10;          &lt;div className=&quot;hidden-sets-header&quot;&gt;&#10;            &lt;span className=&quot;hidden-sets-title&quot;&gt;Hidden sets&lt;/span&gt;&#10;            &lt;button&#10;              className=&quot;hidden-sets-show-all&quot;&#10;              onClick={() =&gt; setHiddenSets(new Set())}&#10;            &gt;&#10;              Show all&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;hidden-sets-list&quot;&gt;&#10;            {hiddenEntries.map(([setName]) =&gt; (&#10;              &lt;button&#10;                key={setName}&#10;                className=&quot;hidden-set-pill&quot;&#10;                onClick={() =&gt; toggleHiddenSet(setName)}&#10;              &gt;&#10;                {setName}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode === 'default' &amp;&amp; visibleEntries.map(([setName, setCards]) =&gt; (&#10;        &lt;div key={setName} className=&quot;set-group&quot;&gt;&#10;          &lt;div className=&quot;set-group-header-row&quot;&gt;&#10;            &lt;h3 className=&quot;set-group-header&quot;&gt;{setName}&lt;/h3&gt;&#10;            &lt;button&#10;              className=&quot;hide-set-btn&quot;&#10;              onClick={() =&gt; toggleHiddenSet(setName)}&#10;            &gt;&#10;              Hide&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;set-cards-grid&quot;&gt;&#10;            {sortByCollectorNumber(setCards).map(card =&gt; {&#10;               const sortedColors = card.colors.length === 0 ? [] : sortColors(card.colors);&#10;               const faces = card.cardFaces || [];&#10;               const faceIndex = faceOverrides[card.id] ?? 0;&#10;               const faceImage = faces[faceIndex]?.imageUrl || card.imageUrl;&#10;                return (&#10;                  &lt;div key={card.id} className={`collection-card ${card.isFoil ? 'foil-mode' : ''}`}&gt;&#10;                    &lt;div className=&quot;card-image-container&quot;&gt;&#10;                      &lt;img&#10;                       src={faceImage}&#10;                        alt={card.name}&#10;                        className={`card-image ${card.isFoil ? 'foil-effect' : ''}`}&#10;                      /&gt;&#10;                     {faces.length &gt; 1 &amp;&amp; (&#10;                       &lt;button&#10;                         type=&quot;button&quot;&#10;                         className=&quot;card-flip-btn&quot;&#10;                         onClick={(event) =&gt; {&#10;                           event.stopPropagation();&#10;                           toggleFace(card.id);&#10;                         }}&#10;                       &gt;&#10;                         Flip&#10;                       &lt;/button&gt;&#10;                     )}&#10;                    &lt;/div&gt;&#10;                    &lt;div className=&quot;card-details&quot;&gt;&#10;                      &lt;div className=&quot;card-name&quot;&gt;&#10;                        {card.name}&#10;                        {card.isFoil &amp;&amp; &lt;span className=&quot;foil-indicator&quot;&gt;✨&lt;/span&gt;}&#10;                      &lt;/div&gt;&#10;                      &lt;div className=&quot;card-type&quot;&gt;{card.type}&lt;/div&gt;&#10;                      &lt;div className=&quot;card-meta&quot;&gt;&#10;                        &lt;div className=&quot;color-badges-container&quot;&gt;&#10;                          {sortedColors.length === 0 ? (&#10;                            &lt;span className=&quot;color-badge color-c&quot;&gt;C&lt;/span&gt;&#10;                          ) : (&#10;                            sortedColors.map(color =&gt; (&#10;                              &lt;span key={color} className={`color-badge color-${color.toLowerCase()}`}&gt;&#10;                                {color}&#10;                              &lt;/span&gt;&#10;                            ))&#10;                          )}&#10;                        &lt;/div&gt;&#10;                        {card.rarity &amp;&amp; (&#10;                          &lt;span className={`rarity-badge rarity-${card.rarity.toLowerCase()}`}&gt;&#10;                            {card.rarity}&#10;                          &lt;/span&gt;&#10;                        )}&#10;                        {card.isFoil &amp;&amp; (&#10;                          &lt;span className=&quot;foil-badge&quot;&gt;Foil&lt;/span&gt;&#10;                        )}&#10;                        &lt;span className=&quot;card-number&quot;&gt;#{card.collectorNumber}&lt;/span&gt;&#10;                      &lt;/div&gt;&#10;                      {card.priceEur !== undefined &amp;&amp; (&#10;                        &lt;div className=&quot;card-price&quot;&gt;&#10;                          &lt;span className=&quot;price-label&quot;&gt;Price:&lt;/span&gt;&#10;                          &lt;span className=&quot;price-value&quot;&gt;€{card.priceEur.toFixed(2)}&lt;/span&gt;&#10;                          {card.quantity &gt; 1 &amp;&amp; (&#10;                            &lt;span className=&quot;price-total&quot;&gt;&#10;                              (€{(card.priceEur * card.quantity).toFixed(2)} total)&#10;                            &lt;/span&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      &lt;div className=&quot;card-controls&quot;&gt;&#10;                        &lt;div className=&quot;quantity-control&quot;&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onUpdateQuantity(card.id, Math.max(1, card.quantity - 1))}&#10;                            className=&quot;qty-btn&quot;&#10;                          &gt;&#10;                            −&#10;                          &lt;/button&gt;&#10;                          &lt;input&#10;                            type=&quot;number&quot;&#10;                            min=&quot;1&quot;&#10;                            max=&quot;999&quot;&#10;                            value={card.quantity}&#10;                            onChange={(e) =&gt; onUpdateQuantity(card.id, parseInt(e.target.value) || 1)}&#10;                            className=&quot;quantity-input&quot;&#10;                          /&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onUpdateQuantity(card.id, card.quantity + 1)}&#10;                            className=&quot;qty-btn&quot;&#10;                          &gt;&#10;                            +&#10;                          &lt;/button&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onRemoveCard(card.id)}&#10;                            className=&quot;delete-btn&quot;&#10;                            title=&quot;Remove card&quot;&#10;                          &gt;&#10;                            ️&#10;                          &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                );&#10;             })}&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      ))}&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default CardList;&#10;&#10;" />
              <option name="updatedContent" value="import React, { useState } from 'react';&#10;import Card from '../types/Card';&#10;import '../styles/CardList.css';&#10;&#10;interface CardListProps {&#10;  cards: Card[];&#10;  onRemoveCard: (id: number) =&gt; void;&#10;  onUpdateQuantity: (id: number, quantity: number) =&gt; void;&#10;}&#10;&#10;type SortMode = 'default' | 'price-asc' | 'price-desc';&#10;&#10;const CardList: React.FC&lt;CardListProps&gt; = ({ cards, onRemoveCard, onUpdateQuantity }) =&gt; {&#10;  const [nameQuery, setNameQuery] = useState('');&#10;  const [setQuery, setSetQuery] = useState('');&#10;  const [typeQuery, setTypeQuery] = useState('');&#10;  const [oracleQuery, setOracleQuery] = useState('');&#10;  const [selectedColors, setSelectedColors] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [selectedRarities, setSelectedRarities] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [hiddenSets, setHiddenSets] = useState&lt;Set&lt;string&gt;&gt;(new Set());&#10;  const [faceOverrides, setFaceOverrides] = useState&lt;Record&lt;number, number&gt;&gt;({});&#10;  const [sortMode, setSortMode] = useState&lt;SortMode&gt;('default');&#10;&#10;  const allColors = ['W', 'U', 'B', 'R', 'G', 'C'];&#10;  const colorNames: Record&lt;string, string&gt; = {&#10;    'W': 'White',&#10;    'U': 'Blue',&#10;    'B': 'Black',&#10;    'R': 'Red',&#10;    'G': 'Green',&#10;    'C': 'Colorless'&#10;  };&#10;&#10;  const allRarities = ['common', 'uncommon', 'rare', 'mythic'];&#10;  const rarityNames: Record&lt;string, string&gt; = {&#10;    'common': 'Common',&#10;    'uncommon': 'Uncommon',&#10;    'rare': 'Rare',&#10;    'mythic': 'Mythic'&#10;  };&#10;&#10;  // Sort colors in WUBRG order&#10;  const sortColors = (colors: string[]): string[] =&gt; {&#10;    const colorOrder: Record&lt;string, number&gt; = { 'W': 0, 'U': 1, 'B': 2, 'R': 3, 'G': 4, 'C': 5 };&#10;    return [...colors].sort((a, b) =&gt; (colorOrder[a] ?? 99) - (colorOrder[b] ?? 99));&#10;  };&#10;&#10;  const toggleColor = (color: string) =&gt; {&#10;    const newColors = new Set(selectedColors);&#10;    if (newColors.has(color)) {&#10;      newColors.delete(color);&#10;    } else {&#10;      newColors.add(color);&#10;    }&#10;    setSelectedColors(newColors);&#10;  };&#10;&#10;  const toggleRarity = (rarity: string) =&gt; {&#10;    const newRarities = new Set(selectedRarities);&#10;    if (newRarities.has(rarity)) {&#10;      newRarities.delete(rarity);&#10;    } else {&#10;      newRarities.add(rarity);&#10;    }&#10;    setSelectedRarities(newRarities);&#10;  };&#10;&#10;  const filteredCards = cards.filter(card =&gt; {&#10;    // Rarity filter&#10;    if (selectedRarities.size &gt; 0) {&#10;      const cardRarity = card.rarity?.toLowerCase();&#10;      if (!cardRarity || !selectedRarities.has(cardRarity)) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    // Color filter&#10;    if (selectedColors.size &gt; 0) {&#10;      // For colorless cards&#10;      if (card.colors.length === 0 &amp;&amp; !selectedColors.has('C')) {&#10;        return false;&#10;      }&#10;      // For colored cards, check if any selected color matches&#10;      if (card.colors.length &gt; 0) {&#10;        const hasMatchingColor = card.colors.some(color =&gt; selectedColors.has(color));&#10;        if (!hasMatchingColor) {&#10;          return false;&#10;        }&#10;      }&#10;    }&#10;&#10;    const nameTerm = nameQuery.trim().toLowerCase();&#10;    if (nameTerm &amp;&amp; !card.name.toLowerCase().includes(nameTerm)) {&#10;      return false;&#10;    }&#10;&#10;    const setTerm = setQuery.trim().toLowerCase();&#10;    if (setTerm) {&#10;      const matchesSetName = card.setName.toLowerCase().includes(setTerm);&#10;      const matchesSetCode = card.set.toLowerCase().includes(setTerm);&#10;      if (!matchesSetName &amp;&amp; !matchesSetCode) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    const typeTerm = typeQuery.trim().toLowerCase();&#10;    if (typeTerm &amp;&amp; !card.type.toLowerCase().includes(typeTerm)) {&#10;      return false;&#10;    }&#10;&#10;    const oracleTerm = oracleQuery.trim().toLowerCase();&#10;    if (oracleTerm) {&#10;      const oracleText = card.oracleText?.toLowerCase() || '';&#10;      if (!oracleText.includes(oracleTerm)) {&#10;        return false;&#10;      }&#10;    }&#10;&#10;    return true;&#10;  });&#10;&#10;  // Apply sorting&#10;  const sortedAndFilteredCards = (() =&gt; {&#10;    const cardsCopy = [...filteredCards];&#10;    if (sortMode === 'price-asc') {&#10;      return cardsCopy.sort((a, b) =&gt; {&#10;        const priceA = a.priceEur || 0;&#10;        const priceB = b.priceEur || 0;&#10;        return priceA - priceB;&#10;      });&#10;    } else if (sortMode === 'price-desc') {&#10;      return cardsCopy.sort((a, b) =&gt; {&#10;        const priceA = a.priceEur || 0;&#10;        const priceB = b.priceEur || 0;&#10;        return priceB - priceA;&#10;      });&#10;    }&#10;    return cardsCopy;&#10;  })();&#10;&#10;  if (cards.length === 0) {&#10;    return (&#10;      &lt;div className=&quot;empty-state&quot;&gt;&#10;        &lt;p&gt; No cards in your collection yet&lt;/p&gt;&#10;        &lt;p className=&quot;empty-subtitle&quot;&gt;Browse sets and click cards to add them!&lt;/p&gt;&#10;      &lt;/div&gt;&#10;    );&#10;  }&#10;&#10;  // Group cards by set only in default sort mode&#10;  const cardsBySet = sortMode === 'default'&#10;    ? sortedAndFilteredCards.reduce((acc, card) =&gt; {&#10;        if (!acc[card.setName]) {&#10;          acc[card.setName] = [];&#10;        }&#10;        acc[card.setName].push(card);&#10;        return acc;&#10;      }, {} as Record&lt;string, Card[]&gt;)&#10;    : {};&#10;&#10;  const sortSetsByRelease = (entries: Array&lt;[string, Card[]]&gt;) =&gt; {&#10;    return [...entries].sort(([, aCards], [, bCards]) =&gt; {&#10;      const aDate = aCards[0]?.setReleasedAt ? new Date(aCards[0].setReleasedAt) : null;&#10;      const bDate = bCards[0]?.setReleasedAt ? new Date(bCards[0].setReleasedAt) : null;&#10;&#10;      if (aDate &amp;&amp; bDate) {&#10;        return bDate.getTime() - aDate.getTime();&#10;      }&#10;      if (aDate) {&#10;        return -1;&#10;      }&#10;      if (bDate) {&#10;        return 1;&#10;      }&#10;      return 0;&#10;    });&#10;  };&#10;&#10;  const sortByCollectorNumber = (items: Card[]): Card[] =&gt; {&#10;    return [...items].sort((a, b) =&gt; {&#10;      const aNum = parseInt(a.collectorNumber, 10);&#10;      const bNum = parseInt(b.collectorNumber, 10);&#10;&#10;      if (!Number.isNaN(aNum) &amp;&amp; !Number.isNaN(bNum)) {&#10;        return aNum - bNum;&#10;      }&#10;      if (!Number.isNaN(aNum)) {&#10;        return -1;&#10;      }&#10;      if (!Number.isNaN(bNum)) {&#10;        return 1;&#10;      }&#10;      return a.collectorNumber.localeCompare(b.collectorNumber, undefined, { numeric: true });&#10;    });&#10;  };&#10;&#10;  const toggleHiddenSet = (setName: string) =&gt; {&#10;    const next = new Set(hiddenSets);&#10;    if (next.has(setName)) {&#10;      next.delete(setName);&#10;    } else {&#10;      next.add(setName);&#10;    }&#10;    setHiddenSets(next);&#10;  };&#10;&#10;  const toggleFace = (cardId: number) =&gt; {&#10;    setFaceOverrides(prev =&gt; {&#10;      const current = prev[cardId] ?? 0;&#10;      return { ...prev, [cardId]: current === 0 ? 1 : 0 };&#10;    });&#10;  };&#10;&#10;  const visibleEntries = sortSetsByRelease(Object.entries(cardsBySet))&#10;    .filter(([setName]) =&gt; !hiddenSets.has(setName));&#10;&#10;  const hiddenEntries = sortSetsByRelease(Object.entries(cardsBySet))&#10;    .filter(([setName]) =&gt; hiddenSets.has(setName));&#10;&#10;  // Calculate total collection value&#10;  const totalValue = sortedAndFilteredCards.reduce((sum, card) =&gt; {&#10;    const cardValue = (card.priceEur || 0) * card.quantity;&#10;    return sum + cardValue;&#10;  }, 0);&#10;&#10;  return (&#10;    &lt;div className=&quot;card-collection&quot;&gt;&#10;      &lt;div className=&quot;collection-header&quot;&gt;&#10;        &lt;h2&gt;Your Collection&lt;/h2&gt;&#10;        &lt;div className=&quot;collection-stats&quot;&gt;&#10;          &lt;span&gt;Showing {sortedAndFilteredCards.length} of {cards.length} cards&lt;/span&gt;&#10;          {totalValue &gt; 0 &amp;&amp; (&#10;            &lt;span className=&quot;collection-value&quot;&gt;&#10;              Total Value: €{totalValue.toFixed(2)}&#10;            &lt;/span&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      &lt;div className=&quot;collection-filters&quot;&gt;&#10;        &lt;div className=&quot;search-grid&quot;&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-name&quot;&gt;Name&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-name&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Lightning Bolt&quot;&#10;              value={nameQuery}&#10;              onChange={(e) =&gt; setNameQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-set&quot;&gt;Set (name/code)&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-set&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Modern Horizons or mh2&quot;&#10;              value={setQuery}&#10;              onChange={(e) =&gt; setSetQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-type&quot;&gt;Type&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-type&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. Creature&quot;&#10;              value={typeQuery}&#10;              onChange={(e) =&gt; setTypeQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;search-field&quot;&gt;&#10;            &lt;label className=&quot;search-label&quot; htmlFor=&quot;search-oracle&quot;&gt;Oracle text&lt;/label&gt;&#10;            &lt;input&#10;              id=&quot;search-oracle&quot;&#10;              type=&quot;text&quot;&#10;              className=&quot;search-input&quot;&#10;              placeholder=&quot;e.g. draw a card&quot;&#10;              value={oracleQuery}&#10;              onChange={(e) =&gt; setOracleQuery(e.target.value)}&#10;            /&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;        {(nameQuery || setQuery || typeQuery || oracleQuery) &amp;&amp; (&#10;          &lt;button&#10;            className=&quot;clear-search&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;            }}&#10;          &gt;&#10;            Clear search&#10;          &lt;/button&gt;&#10;        )}&#10;&#10;        &lt;div className=&quot;color-filters&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Colors:&lt;/span&gt;&#10;          &lt;div className=&quot;color-buttons&quot;&gt;&#10;            {allColors.map(color =&gt; (&#10;              &lt;button&#10;                key={color}&#10;                className={`color-filter-btn color-${color.toLowerCase()} ${selectedColors.has(color) ? 'active' : ''}`}&#10;                onClick={() =&gt; toggleColor(color)}&#10;                title={colorNames[color]}&#10;              &gt;&#10;                {color}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;          {selectedColors.size &gt; 0 &amp;&amp; (&#10;            &lt;button&#10;              className=&quot;clear-filters&quot;&#10;              onClick={() =&gt; setSelectedColors(new Set())}&#10;            &gt;&#10;              Clear filters&#10;            &lt;/button&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        &lt;div className=&quot;rarity-filters&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Rarity:&lt;/span&gt;&#10;          &lt;div className=&quot;rarity-buttons&quot;&gt;&#10;            {allRarities.map(rarity =&gt; (&#10;              &lt;button&#10;                key={rarity}&#10;                className={`rarity-filter-btn rarity-${rarity} ${selectedRarities.has(rarity) ? 'active' : ''}`}&#10;                onClick={() =&gt; toggleRarity(rarity)}&#10;                title={rarityNames[rarity]}&#10;              &gt;&#10;                {rarityNames[rarity]}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;          {selectedRarities.size &gt; 0 &amp;&amp; (&#10;            &lt;button&#10;              className=&quot;clear-filters&quot;&#10;              onClick={() =&gt; setSelectedRarities(new Set())}&#10;            &gt;&#10;              Clear filters&#10;            &lt;/button&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        &lt;div className=&quot;sort-options&quot;&gt;&#10;          &lt;span className=&quot;filter-label&quot;&gt;Sort by:&lt;/span&gt;&#10;          &lt;div className=&quot;sort-buttons&quot;&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'default' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('default')}&#10;              title=&quot;Default sorting (by set and collector number)&quot;&#10;            &gt;&#10;              Default&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'price-asc' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('price-asc')}&#10;              title=&quot;Sort by price ascending (lowest first)&quot;&#10;            &gt;&#10;              Price ↑&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              className={`sort-btn ${sortMode === 'price-desc' ? 'active' : ''}`}&#10;              onClick={() =&gt; setSortMode('price-desc')}&#10;              title=&quot;Sort by price descending (highest first)&quot;&#10;            &gt;&#10;              Price ↓&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;&#10;      {Object.keys(cardsBySet).length === 0 &amp;&amp; sortMode === 'default' &amp;&amp; (&#10;        &lt;div className=&quot;no-results&quot;&gt;&#10;          &lt;p&gt;No cards match your search criteria&lt;/p&gt;&#10;          &lt;button&#10;            className=&quot;reset-filters-btn&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;              setSelectedColors(new Set());&#10;            }}&#10;          &gt;&#10;            Reset all filters&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode !== 'default' &amp;&amp; sortedAndFilteredCards.length === 0 &amp;&amp; (&#10;        &lt;div className=&quot;no-results&quot;&gt;&#10;          &lt;p&gt;No cards match your search criteria&lt;/p&gt;&#10;          &lt;button&#10;            className=&quot;reset-filters-btn&quot;&#10;            onClick={() =&gt; {&#10;              setNameQuery('');&#10;              setSetQuery('');&#10;              setTypeQuery('');&#10;              setOracleQuery('');&#10;              setSelectedColors(new Set());&#10;            }}&#10;          &gt;&#10;            Reset all filters&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode !== 'default' &amp;&amp; sortedAndFilteredCards.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;set-cards-grid&quot;&gt;&#10;          {sortedAndFilteredCards.map(card =&gt; {&#10;            const sortedColors = card.colors.length === 0 ? [] : sortColors(card.colors);&#10;            const faces = card.cardFaces || [];&#10;            const faceIndex = faceOverrides[card.id] ?? 0;&#10;            const faceImage = faces[faceIndex]?.imageUrl || card.imageUrl;&#10;            return (&#10;              &lt;div key={card.id} className={`collection-card ${card.isFoil ? 'foil-mode' : ''}`}&gt;&#10;                &lt;div className=&quot;card-image-container&quot;&gt;&#10;                  &lt;img&#10;                   src={faceImage}&#10;                    alt={card.name}&#10;                    className={`card-image ${card.isFoil ? 'foil-effect' : ''}`}&#10;                  /&gt;&#10;                 {faces.length &gt; 1 &amp;&amp; (&#10;                   &lt;button&#10;                     type=&quot;button&quot;&#10;                     className=&quot;card-flip-btn&quot;&#10;                     onClick={(event) =&gt; {&#10;                       event.stopPropagation();&#10;                       toggleFace(card.id);&#10;                     }}&#10;                   &gt;&#10;                     Flip&#10;                   &lt;/button&gt;&#10;                 )}&#10;                &lt;/div&gt;&#10;                &lt;div className=&quot;card-details&quot;&gt;&#10;                  &lt;div className=&quot;card-name&quot;&gt;&#10;                    {card.name}&#10;                    {card.isFoil &amp;&amp; &lt;span className=&quot;foil-indicator&quot;&gt;✨&lt;/span&gt;}&#10;                  &lt;/div&gt;&#10;                  &lt;div className=&quot;card-type&quot;&gt;{card.type}&lt;/div&gt;&#10;                  &lt;div className=&quot;card-meta&quot;&gt;&#10;                    &lt;div className=&quot;color-badges-container&quot;&gt;&#10;                      {sortedColors.length === 0 ? (&#10;                        &lt;span className=&quot;color-badge color-c&quot;&gt;C&lt;/span&gt;&#10;                      ) : (&#10;                        sortedColors.map(color =&gt; (&#10;                          &lt;span key={color} className={`color-badge color-${color.toLowerCase()}`}&gt;&#10;                            {color}&#10;                          &lt;/span&gt;&#10;                        ))&#10;                      )}&#10;                    &lt;/div&gt;&#10;                    {card.rarity &amp;&amp; (&#10;                      &lt;span className={`rarity-badge rarity-${card.rarity.toLowerCase()}`}&gt;&#10;                        {card.rarity}&#10;                      &lt;/span&gt;&#10;                    )}&#10;                    {card.isFoil &amp;&amp; (&#10;                      &lt;span className=&quot;foil-badge&quot;&gt;Foil&lt;/span&gt;&#10;                    )}&#10;                    &lt;span className=&quot;card-number&quot;&gt;#{card.collectorNumber}&lt;/span&gt;&#10;                  &lt;/div&gt;&#10;                  {card.priceEur !== undefined &amp;&amp; (&#10;                    &lt;div className=&quot;card-price&quot;&gt;&#10;                      &lt;span className=&quot;price-label&quot;&gt;Price:&lt;/span&gt;&#10;                      &lt;span className=&quot;price-value&quot;&gt;€{card.priceEur.toFixed(2)}&lt;/span&gt;&#10;                      {card.quantity &gt; 1 &amp;&amp; (&#10;                        &lt;span className=&quot;price-total&quot;&gt;&#10;                          (€{(card.priceEur * card.quantity).toFixed(2)} total)&#10;                        &lt;/span&gt;&#10;                      )}&#10;                    &lt;/div&gt;&#10;                  )}&#10;                  &lt;div className=&quot;card-controls&quot;&gt;&#10;                    &lt;div className=&quot;quantity-control&quot;&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onUpdateQuantity(card.id, Math.max(1, card.quantity - 1))}&#10;                        className=&quot;qty-btn&quot;&#10;                      &gt;&#10;                        −&#10;                      &lt;/button&gt;&#10;                      &lt;input&#10;                        type=&quot;number&quot;&#10;                        min=&quot;1&quot;&#10;                        max=&quot;999&quot;&#10;                        value={card.quantity}&#10;                        onChange={(e) =&gt; onUpdateQuantity(card.id, parseInt(e.target.value) || 1)}&#10;                        className=&quot;quantity-input&quot;&#10;                      /&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onUpdateQuantity(card.id, card.quantity + 1)}&#10;                        className=&quot;qty-btn&quot;&#10;                      &gt;&#10;                        +&#10;                      &lt;/button&gt;&#10;                      &lt;button&#10;                        onClick={() =&gt; onRemoveCard(card.id)}&#10;                        className=&quot;delete-btn&quot;&#10;                        title=&quot;Remove card&quot;&#10;                      &gt;&#10;                        ️&#10;                      &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                &lt;/div&gt;&#10;              &lt;/div&gt;&#10;            );&#10;          })}&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode === 'default' &amp;&amp; hiddenEntries.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;hidden-sets&quot;&gt;&#10;          &lt;div className=&quot;hidden-sets-header&quot;&gt;&#10;            &lt;span className=&quot;hidden-sets-title&quot;&gt;Hidden sets&lt;/span&gt;&#10;            &lt;button&#10;              className=&quot;hidden-sets-show-all&quot;&#10;              onClick={() =&gt; setHiddenSets(new Set())}&#10;            &gt;&#10;              Show all&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;hidden-sets-list&quot;&gt;&#10;            {hiddenEntries.map(([setName]) =&gt; (&#10;              &lt;button&#10;                key={setName}&#10;                className=&quot;hidden-set-pill&quot;&#10;                onClick={() =&gt; toggleHiddenSet(setName)}&#10;              &gt;&#10;                {setName}&#10;              &lt;/button&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      )}&#10;&#10;      {sortMode === 'default' &amp;&amp; visibleEntries.map(([setName, setCards]) =&gt; (&#10;        &lt;div key={setName} className=&quot;set-group&quot;&gt;&#10;          &lt;div className=&quot;set-group-header-row&quot;&gt;&#10;            &lt;h3 className=&quot;set-group-header&quot;&gt;{setName}&lt;/h3&gt;&#10;            &lt;button&#10;              className=&quot;hide-set-btn&quot;&#10;              onClick={() =&gt; toggleHiddenSet(setName)}&#10;            &gt;&#10;              Hide&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;          &lt;div className=&quot;set-cards-grid&quot;&gt;&#10;            {sortByCollectorNumber(setCards).map(card =&gt; {&#10;               const sortedColors = card.colors.length === 0 ? [] : sortColors(card.colors);&#10;               const faces = card.cardFaces || [];&#10;               const faceIndex = faceOverrides[card.id] ?? 0;&#10;               const faceImage = faces[faceIndex]?.imageUrl || card.imageUrl;&#10;                return (&#10;                  &lt;div key={card.id} className={`collection-card ${card.isFoil ? 'foil-mode' : ''}`}&gt;&#10;                    &lt;div className=&quot;card-image-container&quot;&gt;&#10;                      &lt;img&#10;                       src={faceImage}&#10;                        alt={card.name}&#10;                        className={`card-image ${card.isFoil ? 'foil-effect' : ''}`}&#10;                      /&gt;&#10;                     {faces.length &gt; 1 &amp;&amp; (&#10;                       &lt;button&#10;                         type=&quot;button&quot;&#10;                         className=&quot;card-flip-btn&quot;&#10;                         onClick={(event) =&gt; {&#10;                           event.stopPropagation();&#10;                           toggleFace(card.id);&#10;                         }}&#10;                       &gt;&#10;                         Flip&#10;                       &lt;/button&gt;&#10;                     )}&#10;                    &lt;/div&gt;&#10;                    &lt;div className=&quot;card-details&quot;&gt;&#10;                      &lt;div className=&quot;card-name&quot;&gt;&#10;                        {card.name}&#10;                        {card.isFoil &amp;&amp; &lt;span className=&quot;foil-indicator&quot;&gt;✨&lt;/span&gt;}&#10;                      &lt;/div&gt;&#10;                      &lt;div className=&quot;card-type&quot;&gt;{card.type}&lt;/div&gt;&#10;                      &lt;div className=&quot;card-meta&quot;&gt;&#10;                        &lt;div className=&quot;color-badges-container&quot;&gt;&#10;                          {sortedColors.length === 0 ? (&#10;                            &lt;span className=&quot;color-badge color-c&quot;&gt;C&lt;/span&gt;&#10;                          ) : (&#10;                            sortedColors.map(color =&gt; (&#10;                              &lt;span key={color} className={`color-badge color-${color.toLowerCase()}`}&gt;&#10;                                {color}&#10;                              &lt;/span&gt;&#10;                            ))&#10;                          )}&#10;                        &lt;/div&gt;&#10;                        {card.rarity &amp;&amp; (&#10;                          &lt;span className={`rarity-badge rarity-${card.rarity.toLowerCase()}`}&gt;&#10;                            {card.rarity}&#10;                          &lt;/span&gt;&#10;                        )}&#10;                        {card.isFoil &amp;&amp; (&#10;                          &lt;span className=&quot;foil-badge&quot;&gt;Foil&lt;/span&gt;&#10;                        )}&#10;                        &lt;span className=&quot;card-number&quot;&gt;#{card.collectorNumber}&lt;/span&gt;&#10;                      &lt;/div&gt;&#10;                      {card.priceEur !== undefined &amp;&amp; (&#10;                        &lt;div className=&quot;card-price&quot;&gt;&#10;                          &lt;span className=&quot;price-label&quot;&gt;Price:&lt;/span&gt;&#10;                          &lt;span className=&quot;price-value&quot;&gt;€{card.priceEur.toFixed(2)}&lt;/span&gt;&#10;                          {card.quantity &gt; 1 &amp;&amp; (&#10;                            &lt;span className=&quot;price-total&quot;&gt;&#10;                              (€{(card.priceEur * card.quantity).toFixed(2)} total)&#10;                            &lt;/span&gt;&#10;                          )}&#10;                        &lt;/div&gt;&#10;                      )}&#10;                      &lt;div className=&quot;card-controls&quot;&gt;&#10;                        &lt;div className=&quot;quantity-control&quot;&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onUpdateQuantity(card.id, Math.max(1, card.quantity - 1))}&#10;                            className=&quot;qty-btn&quot;&#10;                          &gt;&#10;                            −&#10;                          &lt;/button&gt;&#10;                          &lt;input&#10;                            type=&quot;number&quot;&#10;                            min=&quot;1&quot;&#10;                            max=&quot;999&quot;&#10;                            value={card.quantity}&#10;                            onChange={(e) =&gt; onUpdateQuantity(card.id, parseInt(e.target.value) || 1)}&#10;                            className=&quot;quantity-input&quot;&#10;                          /&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onUpdateQuantity(card.id, card.quantity + 1)}&#10;                            className=&quot;qty-btn&quot;&#10;                          &gt;&#10;                            +&#10;                          &lt;/button&gt;&#10;                          &lt;button&#10;                            onClick={() =&gt; onRemoveCard(card.id)}&#10;                            className=&quot;delete-btn&quot;&#10;                            title=&quot;Remove card&quot;&#10;                          &gt;&#10;                            ️&#10;                          &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                      &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                  &lt;/div&gt;&#10;                );&#10;              })}&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        ))}&#10;      )}&#10;  );&#10;};&#10;&#10;export default CardList;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>